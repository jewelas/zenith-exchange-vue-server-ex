var setDepthData=function setDepthData(symbol,data,rate,depthValue,lan){var dataTypeKey=Object.keys(data);var priceFix=depthValue;var volumeFix=symbol.volume||0;var names=symbol.name.split("/");var symbolName=names[0];var marketName=names[1]||symbol.quoteSymbol;var depthListData={};var maxTotal=0;dataTypeKey.forEach(function(item){if(item!=="newData"){var objItem=data[item];var totalNum=0;var maxval=0;var dataArr=[];var objKeys=null;if(item==="asks"){objKeys=Object.keys(objItem).sort(function(a,b){return a-b})}else{objKeys=Object.keys(objItem).sort(function(a,b){return b-a})}objKeys.forEach(function(itemKey,index){var itemArr=objItem[itemKey];if(Number(fixD(itemArr[1]),priceFix)!==0&&dataArr.length<150){maxval=maxval<itemArr[1]?itemArr[1]:maxval;totalNum+=itemArr[1];var ratePrice=fixRate(itemArr[0],rate,marketName,lan);var objd={rate:ratePrice,total:fixD(totalNum,volumeFix),price:fixD(itemArr[0],priceFix),vol:fixD(itemArr[1],volumeFix),diff:itemArr[2]};if(data.newData&&data.newData.indexOf(itemArr[0])<0){objd.diff=0}dataArr.push(objd)}});depthListData[item]=dataArr;if(maxTotal<maxval){maxTotal=maxval}}});return{symbol:symbol.name,depthMaxNumber:maxTotal,asksData:depthListData.asks.reverse(),buyData:depthListData.buys}};