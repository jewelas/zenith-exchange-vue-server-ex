(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45903074"],{"5aaf":function(t,e,s){"use strict";s.r(e);s("7f7f");var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"b2cAdd"},[e("header",{staticClass:"addressMent-header b-1-cl a-3-bd"},[t._v("\n    "+t._s("add"===t.nowType?t.$t("assets.b2c.addressAddTit"):t.$t("assets.b2c.addressSetTit"))+"\n  ")]),e("div",{staticClass:"b2cAdd-content"},[e("c-inputLine",{attrs:{value:t.symbol,promptText:t.$t("assets.b2c.lagel"),disabled:!0,errorHave:!0}}),e("c-inputLine",{attrs:{promptText:t.$t("assets.b2c.firstWay"),value:t.$t("assets.b2c.bankCard"),disabled:!0,errorHave:!0}}),e("c-select",{attrs:{value:t.bank,filterable:!0,promptText:t.$t("assets.b2c.country"),name:"country",errorHave:!0,options:t.bankList},on:{onChanges:t.addressChange}}),e("c-inputLine",{attrs:{name:"bankSub",maxLength:"64",promptText:t.$t("assets.b2c.countrySub"),value:t.bankSub,errorHave:!0},on:{onchanges:t.inputChanges}}),e("c-inputLine",{attrs:{name:"cardNo",promptText:t.$t("assets.b2c.countryNo"),maxLength:"64",value:t.cardNo,errorHave:!0},on:{onchanges:t.inputChanges}}),e("c-inputLine",{attrs:{name:"name",promptText:t.$t("assets.b2c.addressUserName"),value:t.name,errorHave:!0,disabled:!0},on:{onchanges:t.inputChanges}}),t.OpenMobile?e("c-inputLine",{attrs:{name:"cms",promptText:t.$t("assets.withdraw.phoneCode"),maxLength:"6",value:t.cms,errorHave:!0,errorFlag:t.cmsErrorFlag,errorText:t.$t("assets.withdraw.phoneCodeError")},on:{onchanges:t.inputChanges}},[e("c-getCode",{attrs:{name:"withdrawGetcode"},on:{click:t.getCodeClick}})],1):t._e(),t.OpenGoogle?e("c-inputLine",{attrs:{name:"google",promptText:t.$t("assets.withdraw.googleCode"),maxLength:"6",value:t.google,errorHave:!0,errorFlag:t.googleErrorFlag,errorText:t.$t("assets.withdraw.googleCodeError")},on:{onchanges:t.inputChanges}}):t._e(),e("c-button",{attrs:{disabled:t.buttonDisable,loading:t.btnLoading,marginTop:"30px",width:"100%"},on:{click:t.submit}},[t._v(t._s(t.$t("assets.b2c.submit")))])],1),e("c-verifyCationc-alert",{attrs:{imgMap:t.imgMap,showFlag:t.alertFlag,titleText:t.$t("assets.withdraw.safetyWarning"),detaText:t.authTitleText,dataList:t.alertData,buttonText:t.$t("assets.withdraw.GotoOpen"),haveClose:!1},on:{close:t.alertClone,confirm:t.alertGo}})],1)},n=[],o=s("e369"),i=(s("ac6a"),s("6b54"),s("95d5")),r={data:function(){return{imgMap:i["s"],symbol:"",bank:"",bankSub:"",cardNo:"",name:"",cms:"",google:"",bankList:[],btnLoading:!1,nowType:"",setId:""}},watch:{AddUserInfoIsReady:{immediate:!0,handler:function(t){if(t){var e=this.$store.state.baseData.userInfo;this.name=e.realName}}}},computed:{AddUserInfoIsReady:function(){return this.userInfoIsReady},buttonDisable:function(){var t=!0,e=!this.OpenMobile||this.cmsFlag,s=!this.OpenGoogle||this.googleFlag;return(this.bank.length&&this.cardNoFlag&&e&&s||this.btnLoading)&&(t=!1),t},regExps:function(){return this.$store.state.regExp},cardNoFlag:function(){return this.regExps.nonEmpty.test(this.cardNo)},bankSubFlag:function(){return this.regExps.nonEmpty.test(this.bankSub)},cmsFlag:function(){return this.regExps.verification.test(this.cms)},googleFlag:function(){return this.regExps.verification.test(this.google)},cmsErrorFlag:function(){return 0!==this.cms.length&&!this.cmsFlag},googleErrorFlag:function(){return 0!==this.google.length&&!this.googleFlag}},methods:{init:function(){var t=this.$route.query,e=t.symbol,s=t.type,a=t.id;if(e&&"add"===s)this.symbol=e.toUpperCase(),this.nowType="add";else{if(!e||"set"!==s||!a)return void this.$router.push("/assets/b2cAccount");this.symbol=e.toUpperCase(),this.nowType="set",this.setId=a}this.getBankList()},addressChange:function(t){this.bank=t.code},getSetMess:function(){var t=this;this.axios({url:"/user/bank/get",params:{id:this.setId}}).then((function(e){"0"===e.code.toString()?(t.bank=e.data.bankNo.toString(),t.bankSub=e.data.bankSub,t.cardNo=e.data.cardNo):t.$bus.$emit("tip",{text:e.msg,type:"error"})}))},submit:function(){var t=this;this.btnLoading=!0,this.axios({url:"add"===this.nowType?"/user/bank/add":"/user/bank/edit",params:{id:"add"===this.nowType?void 0:this.setId,bankId:this.bank,bankSub:this.bankSub||void 0,cardNo:this.cardNo,name:this.name,symbol:this.symbol,smsAuthCode:this.cms||void 0,googleCode:this.google||void 0}}).then((function(e){t.btnLoading=!1,"0"===e.code.toString()?(t.$router.push("/assets/b2cAddressMent?symbol=".concat(t.symbol)),t.$bus.$emit("tip",{text:e.msg,type:"success"})):t.$bus.$emit("tip",{text:e.msg,type:"error"})}))},getCodeClick:function(){this.sendCode()},sendCode:function(){var t=this;this.axios({url:"v4/common/smsValidCode",params:{operationType:"add"===this.nowType?"30":"31"}}).then((function(e){"0"!==e.code.toString()?setTimeout((function(){t.$bus.$emit("getCode-clear","withdrawGetcode"),t.$bus.$emit("tip",{text:e.msg,type:"error"})}),2e3):t.$bus.$emit("tip",{text:t.$t("assets.withdraw.phoneSendSuccess"),type:"success"})}))},inputChanges:function(t,e){this[e]=t},getBankList:function(){var t=this;this.axios({url:"/bank/all",params:{symbol:this.symbol}}).then((function(e){if("0"===e.code.toString()){var s=[];e.data.forEach((function(t){s.push({code:t.bankNo.toString(),value:t.accountName})})),t.bankList=s,s.length&&"add"===t.nowType&&(t.bank=s[0].code),"set"===t.nowType&&t.getSetMess()}else t.$bus.$emit("tip",{text:e.msg,type:"error"})}))}}},u=(s("ecaf"),{mixins:[o["a"],r],mounted:function(){this.init()}}),c=u,h=s("2877"),d=Object(h["a"])(c,a,n,!1,null,null,null);e["default"]=d.exports},e369:function(t,e,s){"use strict";s("c5f6"),s("6b54");e["a"]={name:"b2cMixins",data:function(){return{alertFlag:!1}},watch:{userInfoIsReady:{immediate:!0,handler:function(t){t&&this.canAlert()}}},methods:{alertClone:function(){this.alertFlag=!1},alertGo:function(){this.$router.push("/personal/userManagement")},canAlert:function(){var t=this;(this.OpenGoogle||!this.enforceGoogleAuth&&this.OpenMobile)&&this.idAuth?this.alertFlag=!1:setTimeout((function(){t.alertFlag=!0}),100)}},computed:{userInfoIsReady:function(){return this.$store.state.baseData.userInfoIsReady},enforceGoogleAuth:function(){return this.$store.state.baseData.is_enforce_google_auth||0},authTitleText:function(){var t="assets.withdraw.enforceGoogleAuth";return this.$t(t)},alertData:function(){var t=[{text:this.$t("otcRelease.authentication"),flag:this.idAuth},{text:this.$t("assets.withdraw.bindGoogle"),flag:this.OpenGoogle}];return this.enforceGoogleAuth||t.push({text:this.$t("assets.withdraw.bindPhone"),flag:this.OpenMobile}),t},OpenMobile:function(){var t=!1,e=this.$store.state.baseData.userInfo;return e&&"1"===e.isOpenMobileCheck.toString()&&(t=!0),t},OpenGoogle:function(){var t=!1,e=this.$store.state.baseData.userInfo;return e&&"1"===e.googleStatus.toString()&&(t=!0),t},idAuth:function(){var t=this.$store.state.baseData.userInfo,e=0;return t&&(e=1===Number(t.authLevel)),e}}}},ecaf:function(t,e,s){}}]);