(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aecae024"],{a285:function(e,t,n){},c95e:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-management-change-phone fuz-card"},[t("p",{staticClass:"user-management-child-header b-1-cl a-3-bd a-5-bg"},[e.krwUserBank?t("span",[e._v(e._s(e.$t("personal.krwBank.setBank")))]):t("span",[e._v(e._s(e.$t("personal.krwBank.addBank")))])]),t("div",{staticClass:"user-management-center a-5-bg"},[t("p",{staticClass:"center-title b-7-cl"}),t("div",{staticClass:"center-input"},[t("c-inputLine",{attrs:{name:"userName",inputType:"text",promptText:e.$t("personal.krwBank.userName"),errorHave:!0,disabled:!0,marginTop:"0px",value:e.userName}}),t("c-select",{attrs:{value:e.backType,promptText:e.$t("personal.krwBank.country"),name:"country",errorHave:!0,options:e.backTypeOptions},on:{onChanges:e.backTypeChange}}),t("c-inputLine",{attrs:{name:"bankAccount",inputType:"text",promptText:e.$t("personal.krwBank.bankAccount"),errorHave:!0,errorText:e.$t("personal.krwBank.bankAccountError"),errorFlag:e.bankAccountErrorFlag,marginTop:"0px",value:e.bankAccount},on:{onchanges:e.inputChanges}}),e.OpenMobile?t("c-inputLine",{attrs:{name:"smsCode",maxLength:"6",promptText:e.$t("personal.krwBank.smsCode"),errorHave:!0,errorText:e.$t("personal.krwBank.smsCodeError"),errorFlag:e.smsCodeFlagErrorFlag,marginTop:"0px",value:e.smsCode},on:{onchanges:e.inputChanges}},[t("c-getCode",{attrs:{name:"smsCode",buttonName:"loginGetcodeBtn"},on:{click:e.getCodeClick}})],1):e._e(),e.OpenGoogle?t("c-inputLine",{attrs:{name:"googleCode",maxLength:"6",promptText:e.$t("personal.krwBank.googleCode"),errorHave:!0,errorText:e.$t("personal.krwBank.googleCodeError"),errorFlag:!1,marginTop:"0px",value:e.googleCode},on:{onchanges:e.inputChanges}}):e._e(),t("c-button",{attrs:{type:"solid",loading:e.submitLoading,big:!0,paddingW:"0px",disabled:e.submitDisabled,marginTop:"18px",height:"40px",width:"100%"},on:{click:e.submit}},[e._v(e._s(e.$t("personal.tool.modify")))])],1)])])},o=[],a=(n("7f7f"),n("ac6a"),n("6b54"),{name:"changePassword",data:function(){return{userName:"",backType:"",bankAccount:"",backTypeOptions:[],smsCode:"",googleCode:"",submitLoading:!1}},watch:{userInfo:function(e){e&&(e.realName.length?this.userName=e.realName:this.userName=e.phone_auth_name,this.initStatus())}},computed:{OpenGoogle:function(){var e=!1,t=this.$store.state.baseData.userInfo;return t&&"1"===t.googleStatus.toString()&&(e=!0),e},krwPhoneAuth:function(){var e="0";return this.userInfo&&this.userInfo.is_krw_phone_auth&&(e=this.userInfo.is_krw_phone_auth.toString()),e},authLevel:function(){var e="";return this.userInfo&&(e=this.userInfo.authLevel.toString()),e},krwUserBank:function(){return this.$store.state.personal.krwUserBank},regExps:function(){return this.$store.state.regExp},userInfo:function(){return this.$store.state.baseData.userInfo},OpenMobile:function(){var e=!1,t=this.$store.state.baseData.userInfo;return t&&"1"===t.isOpenMobileCheck.toString()&&(e=!0),e},bankAccountFlag:function(){return this.regExps.number.test(this.bankAccount)},bankAccountErrorFlag:function(){return 0!==this.bankAccount.length&&!this.bankAccountFlag},smsCodeFlag:function(){return this.regExps.verification.test(this.smsCode)},smsCodeFlagErrorFlag:function(){return 0!==this.smsCode.length&&!this.smsCodeFlag},googleCodeFlag:function(){return this.regExps.verification.test(this.googleCode)},googleCodeFlagErrorFlag:function(){return 0!==this.googleCode.length&&!this.googleCodeFlag},submitDisabled:function(){var e=!0,t=!0;return this.OpenMobile&&(e=this.smsCodeFlag),this.OpenGoogle&&(t=this.googleCodeFlag),!(this.backType.length&&this.bankAccountFlag&&e&&t||this.submitLoading)}},methods:{init:function(){var e=this;this.userInfo&&(this.userInfo.realName.length?this.userName=this.userInfo.realName:this.userName=this.userInfo.phone_auth_name,this.initStatus()),this.axios({url:"bank/all",method:"post"}).then((function(t){if("0"===t.code.toString()){var n=[];t.data.forEach((function(e){n.push({value:e.name,code:e.id.toString()})})),n.length&&(e.backType=n[0].code),e.backTypeOptions=n}}))},initStatus:function(){var e=!1;"1"!==this.krwPhoneAuth&&"1"!==this.authLevel||(e=!0),this.OpenGoogle&&e||this.$router.push("/personal/userManagement")},submit:function(){var e=this;this.submitLoading=!0;var t="user/bank/add",n={bankNo:this.backType,cardNo:this.bankAccount,name:this.userName,smsAuthCode:this.smsCode,googleCode:this.googleCode};this.krwUserBank&&(t="user/bank/edit",n.id=this.krwUserBank.id),this.axios({url:t,params:n}).then((function(t){e.submitLoading=!1,"0"!==t.code.toString()?e.$bus.$emit("tip",{text:t.msg,type:"error"}):(e.$store.dispatch("krwGetUserBank"),e.$bus.$emit("tip",{text:t.msg,type:"success"}),e.$router.push("/personal/userManagement"))}))},getCodeClick:function(){var e=this,t="30";this.krwUserBank&&(t="31"),this.axios({url:"v4/common/smsValidCode",params:{operationType:t}}).then((function(t){"0"!==t.code.toString()?setTimeout((function(){e.$bus.$emit("getCode-clear","smsCode"),e.$bus.$emit("tip",{text:t.msg,type:"error"})}),2e3):e.$bus.$emit("tip",{text:e.$t("assets.addressMent.phoneSendSuccess"),type:"success"})}))},inputChanges:function(e,t){this[t]=e},backTypeChange:function(e){this.backType=e.code}}}),r=(n("a285"),{mixins:[a],mounted:function(){this.init()}}),i=r,u=n("2877"),c=Object(u["a"])(i,s,o,!1,null,null,null);t["default"]=c.exports}}]);