(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03e0d7ee"],{1854:function(t,e,s){"use strict";s("5165")},5165:function(t,e,s){},"8d482":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"notice-info clearfix fuz-page-content"},[e("div",{staticClass:"main-content"},[e("div",{directives:[{name:"drag",rawName:"v-drag"}],staticClass:"h5-evenMenus",on:{click:t.h5ShowMenusFn}},[e("img",{attrs:{src:"https://saas-oss.oss-accelerate.aliyuncs.com/upload/20200710155735466.png",alt:""}})]),e("transition",{attrs:{name:"menus-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.h5ShowMenus,expression:"h5ShowMenus"}],staticClass:"margin-left a-5-bg margin-left-h5"},[e("h3",{staticClass:"menu-tit f-1-cl"},[t._v("\n          "+t._s(t.$t("message.mesage"))+"\n          "),e("span",{staticClass:"h5-evenMenus-list",on:{click:t.h5ShowMenusFn}},[e("svg",{staticClass:"icon icon-16 market-show-button",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-c_7"}})])])]),e("div",{staticClass:"margin-left-h5-body"},[e("ul",{staticClass:"f-2-cl"},t._l(t.sideList,(function(s,a){return e("li",{key:a,staticClass:"menu-item",class:{"f-1-cl c-4-bg":t.messageType===s.tid},on:{click:function(e){return t.switchType(s.tid,s.title)}}},[t._v("\n                "+t._s(s.title)+"\n            ")])})),0)])])]),e("div",{staticClass:"menu h5-menu margin-left-pc fuz-card"},[e("h3",{staticClass:"menu-tit f-1-cl fuz-card-title"},[t._v(t._s(t.$t("message.mesage")))]),e("ul",{staticClass:"f-2-cl"},t._l(t.sideList,(function(s,a){return e("li",{key:a,staticClass:"menu-item",class:{"f-1-cl fuz-bg":t.messageType===s.tid},on:{click:function(e){return t.switchType(s.tid,s.title)}}},[t._v("\n            "+t._s(s.title)+"\n        ")])})),0)]),e("div",{staticClass:"content-box"},[e("div",{staticClass:"content-list fuz-card"},[e("h1",{staticClass:"content-title fuz-card-title"},[t._v(t._s(t.title))]),t.notieContent.length?e("ul",{staticClass:"message-list"},[e("li",{staticClass:"all-select fuz-border"},[e("i",{staticClass:"status"},[e("c-checkBox",{attrs:{value:t.dataListId.length===t.selectArr.length},on:{click:function(e){return t.checkoutSelect("all")}}})],1),e("div",{staticClass:"message-text h5-message-text"},[e("div",{staticClass:"main-text f-2-cl"},[t._v("\n                "+t._s(t.$t("message.selectAll"))+"\n              ")])]),e("c-button",{attrs:{type:"text",className:"delete-btn",marginTop:"0"},on:{click:function(e){return t.deleteMsg(t.selectArr,"all")}}},[t._v("\n              "+t._s(t.$t("message.delete"))+"\n            ")]),e("c-button",{attrs:{type:"text",className:"delete-btn",marginTop:"0"},on:{click:function(e){return t.onChangeRead(0,"all")}}},[t._v("\n              "+t._s(t.$t("message.readAll"))+"\n            ")])],1),t._l(t.notieContent,(function(s,a){return e("li",{key:a,staticClass:"fuz-border"},[e("i",{staticClass:"status"},[e("c-checkBox",{attrs:{value:-1!==t.selectArr.indexOf(s.id)},on:{click:function(e){return t.checkoutSelect(s.id)}}})],1),e("div",{staticClass:"message-text"},[e("div",{staticClass:"fuz-content-small",class:1===s.status?"f-1-cl":"f-2-cl",domProps:{innerHTML:t._s(s.messageContent)},on:{click:function(e){return t.onChangeRead(s.id,a)}}}),e("p",{staticClass:"time f-2-cl"},[t._v(t._s(t.formatTimeFn(s.ctime)))])]),e("c-button",{attrs:{type:"text",marginTop:"5px",className:"delete-btn"},on:{click:function(e){return t.deleteMsg(s.id,a)}}},[t._v("\n              "+t._s(t.$t("message.delete"))+"\n            ")])],1)}))],2):e("div",{staticClass:"no-data f-2-cl"},[e("svg",{staticClass:"icon icon-50",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-g_2"}})]),e("p",[t._v("\n            "+t._s(t.$t("common.notData"))+"\n          ")])]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isshowLoading,expression:"isshowLoading"}],staticClass:"loading"},[e("c-loading",{attrs:{size:"50"}})],1)]),t.pagination.count/t.pagination.pageSize>1?e("c-pagination",{attrs:{total:t.pagination.count,classes:"c-3-bg","current-page":t.pagination.page,display:t.pagination.pageSize},on:{pagechange:t.pagechange}}):t._e()],1)])],1)])},i=[],n=s("01c8"),l=(s("6b54"),s("ac6a"),s("95d5")),c={name:"mesage",data:function(){return{messageType:0,sideList:[],notieContent:[],pagination:{count:0,page:1,pageSize:10},selectArr:[],deleteFlag:null,readFlag:null,pageNumber:null,isshowLoading:!0,pageTitle:null,h5ShowMenus:!1}},computed:{title:function(){return this.pageTitle?this.pageTitle:this.sideList.length?this.sideList[0].title:""},dataListId:function(){if(this.notieContent.length){var t=[];return this.notieContent.forEach((function(e){t.push(e.id)})),t}return[]}},methods:{init:function(){this.getListData()},h5ShowMenusFn:function(){this.h5ShowMenus=!this.h5ShowMenus},formatTimeFn:function(t){return Object(l["k"])(t)},getListData:function(){var t=this;this.isshowLoading=!0,this.getData({url:this.$store.state.url.mesage.message,params:{page:this.pagination.page,pageSize:this.pagination.pageSize,messageType:this.messageType},callback:function(e){t.notieContent=e.data.userMessageList,t.sideList=e.data.typeList,t.pagination.count=e.data.count,t.isshowLoading=!1}})},getData:function(t){var e=this,s=t.url,a=t.params,i=t.callback;this.axios({url:s,params:a,method:"post"}).then((function(t){"0"===t.code?i(t):(e.deleteFlag=null,e.readFlag=null,e.$bus.$emit("tip",{text:t.msg,type:"error"}))})).catch((function(){e.deleteFlag=null,e.readFlag=null,e.$bus.$emit("tip",{text:e.$t("common.error_500"),type:"error"})}))},onChangeRead:function(t,e){var s=this;return("all"===e||2!==this.notieContent[e].status)&&(this.readFlag!==t&&(this.readFlag=t,this.getData({url:this.$store.state.url.mesage.message_status,params:{id:t},callback:function(){"all"===e?s.notieContent.forEach((function(t,e){s.notieContent[e].status=2})):s.notieContent[e].status=2,s.$store.dispatch("getMessage_count")}})),!0)},deleteMsg:function(t,e){var s=this;"all"!==e||t.length?this.deleteFlag!==t&&(this.deleteFlag=t,this.getData({url:this.$store.state.url.mesage.message_del,params:{ids:t.toString()},callback:function(){s.selectArr=[],s.notieContent.splice(e,1),s.$store.dispatch("getMessage_count"),s.getListData()}})):this.$bus.$emit("tip",{text:this.$t("message.pleSelContent"),type:"error"})},switchType:function(t,e){this.pageTitle=e,this.messageType=t,this.pagination.page=1,this.h5ShowMenus=!1,this.getListData()},pagechange:function(t){this.pageNumber=t,this.pagination.page=t,this.getListData()},checkoutSelect:function(t){if("all"===t)if(this.selectArr.length===this.dataListId.length)this.selectArr=[];else{var e=Object(n["a"])(this.dataListId),s=e.slice(0);this.selectArr=s}else{var a=this.selectArr.indexOf(t);-1!==a?this.selectArr.splice(a,1):this.selectArr.push(t)}}}},o=(s("f232"),{mixins:[c],mounted:function(){this.init()}}),r=o,u=(s("1854"),s("2877")),g=Object(u["a"])(r,a,i,!1,null,"9da08742",null);e["default"]=g.exports},f232:function(t,e,s){}}]);