(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d02f74a"],{6351:function(e,t,i){},ad50:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editPayment v5-10-bg"},[t("header",{staticClass:"payment-header v5-5-cl v5-12-bd"},[t("svg",{staticClass:"icon icon-20 icon-back",attrs:{"aria-hidden":"true"},on:{click:e.goBack}},[t("use",{attrs:{"xlink:href":"#icon-v5_36"}})]),t("span",[e._v(e._s(e.$t("personal.setUp.title2")))])]),t("section",{staticClass:"payment-form"},[t("div",{staticClass:"payment-name"},[t("span",{staticClass:"line",style:{"background-color":e.paymentColor}}),t("span",{staticClass:"text v5-5-cl"},[e._v(e._s(e.paymentName))])]),e._l(e.paymentFieldList,(function(i,o){return t("div",{key:o,staticClass:"form-item"},[4===i.fieldType?t("div",{staticClass:"realName"},[t("div",{staticClass:"fieldName v5-6-cl"},[e._v(e._s(i.fieldTitle))]),t("div",{staticClass:"fieldValue v5-5-cl"},[e._v(e._s(e.userName))])]):e._e(),1===i.fieldType||2===i.fieldType?t("c-v5-input",{attrs:{width:"100%",type:1===i.fieldType?"text":"textarea",name:i.fieldName,value:e.formData[i.fieldName],promptText:i.fieldTitle,promptClass:"v5-6-cl",placeholder:i.fieldPrompt,errorHave:!0,errorFlag:!!e.error[i.fieldName],errorText:e.error[i.fieldName]},on:{onChanges:e.inputChange}}):e._e(),3===i.fieldType?t("div",{staticClass:"form-upload"},[t("div",{staticClass:"fieldName v5-6-cl"},[e._v(e._s(i.fieldTitle))]),t("div",{staticClass:"upload-content"},[t("c-v5-uploadFile",{attrs:{name:i.fieldName,maxSize:8,url:"common/upload_qrcode",imgSrc:e.formData[i.fieldName]},on:{change:e.uploadChange,delete:e.deleteImg}})],1),t("div",{staticClass:"upload-error v5-3-cl"},[e._v(e._s(e.error[i.fieldName]))])]):e._e()],1)})),t("div",{staticClass:"payment-tip"},[t("div",{staticClass:"tip-title v5-5-cl"},[e._v(e._s(e.$t("otcRelease.Reminder")))]),t("div",{staticClass:"tip-text v5-6-cl"},[e._v(e._s(e.$t("personal.leaglTenderSet.tip")))])]),t("div",{staticClass:"payment-button"},[t("c-v5-button",{attrs:{width:"203px",paddingW:"0",defaultColorClass:e.colorList_1,hoverColorClass:e.colorList_1,activeColorClass:e.colorList_1},on:{click:e.goBack}},[e._v(e._s(e.$t("components.dialog.closeText")))]),t("c-v5-button",{attrs:{width:"203px",paddingW:"0",defaultColorClass:e.colorList_2,hoverColorClass:e.colorList_2,activeColorClass:e.colorList_2},on:{click:e.confirm}},[e._v(e._s(e.$t("components.dialog.confirmText")))])],1)],2),t("c-v5-dialog",{attrs:{showFlag:e.dialogFlag,titleText:e.$t("login.SecurityVerification"),confirmLoading:e.dialogConfirmLoading,confirmDisabled:e.dialogConfirmDisabled},on:{close:e.dialogClose,confirm:e.dialogConfirm}},[t("div",{staticClass:"valid-form_item"},[e.OpenMobile?t("c-v5-input",{attrs:{maxLength:"6",name:"phoneValue",width:"378px",value:e.phoneValue,promptText:e.$t("login.phoneCode"),promptClass:"v5-6-cl",errorHave:!0,errorFlag:e.phoneError,errorText:e.$t("login.phoneCodeError")},on:{onChanges:e.codeChange}},[t("div",{attrs:{slot:"append"},slot:"append"},[t("c-v5-getCode",{attrs:{name:"withdrawGetcode",voiceOpen:e.voiceSmsOpen},on:{click:e.getCodeClick}})],1)]):e._e()],1),t("div",{staticClass:"valid-form_item"},[e.OpenGoogle?t("c-v5-input",{attrs:{maxLength:"6",name:"googleValue",width:"378px",value:e.googleValue,promptText:e.$t("login.googleCode"),promptClass:"v5-6-cl",errorHave:!0,errorFlag:e.googleError,errorText:e.$t("login.googleCodeError")},on:{onChanges:e.codeChange}}):e._e()],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading"},[t("c-loading",{attrs:{size:"50"}})],1)],1)},a=[],r=(i("8e6e"),i("456d"),i("bd86"));i("3b2b"),i("7514"),i("ac6a"),i("6b54");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={name:"editPayment",data:function(){return{loading:!1,payment:null,id:null,isEdit:!1,paymentName:"",paymentColor:"",paymentFieldList:[],formData:{},requireList:[],regex:[],error:{},dialogFlag:!1,dialogConfirmLoading:!1,googleValue:"",phoneValue:"",smsType:"sms"}},computed:{userInfo:function(){return this.$store.state.baseData.userInfo},userName:function(){return this.userInfo.realName},colorList_1:function(){return"v5-9-bd v5-9-bg u-16-cl"},colorList_2:function(){return"v5-1-bd v5-1-bg u-16-cl"},OpenMobile:function(){var e=!1,t=this.userInfo;return t&&"1"===t.isOpenMobileCheck.toString()&&(e=!0),e},OpenGoogle:function(){var e=!1,t=this.userInfo;return t&&"1"===t.googleStatus.toString()&&(e=!0),e},phoneValueFlag:function(){return this.$store.state.regExp.verification.test(this.phoneValue)},googleValueFlag:function(){return this.$store.state.regExp.verification.test(this.googleValue)},phoneError:function(){return 0!==this.phoneValue.length&&!this.phoneValueFlag},googleError:function(){return 0!==this.googleValue.length&&!this.googleValueFlag},dialogConfirmDisabled:function(){var e=!0,t=!0;return this.OpenMobile&&(e=this.phoneValueFlag),this.OpenGoogle&&(t=this.googleValueFlag),!(e&&t||this.dialogConfirmLoading)},voiceSmsOpen:function(){return this.$store.state.baseData.voiceSmsOpen},otcPaymentAdd:function(){return this.$store.state.personal.otcPaymentAdd},otcPaymentUpdate:function(){return this.$store.state.personal.otcPaymentUpdate}},watch:{otcPaymentAdd:function(e){null!==e&&(this.loading=!1,"success"===e.text?(this.$bus.$emit("tip",{text:e.msg,type:"success"}),this.dialogFlag=!1,this.$router.push("/personal/leaglTenderSet")):this.$bus.$emit("tip",{text:e.msg,type:"error"}))},otcPaymentUpdate:function(e){null!==e&&(this.loading=!1,"success"===e.text?(this.$bus.$emit("tip",{text:e.msg,type:"success"}),this.dialogFlag=!1,this.$router.push("/personal/leaglTenderSet")):this.$bus.$emit("tip",{text:e.msg,type:"error"}))}},methods:{init:function(){this.payment=this.$route.query.payment,this.id=this.$route.query.id,this.id&&(this.isEdit=!0),this.payment?this.getPaymentDetail():this.$router.push("/personal/leaglTenderSet")},goBack:function(){this.$router.back()},getPaymentDetail:function(){var e=this;this.loading=!0,this.axios({url:"otc/payment/getPaymentField",hostType:"otc",params:{payment:this.payment,id:this.id}}).then((function(t){var i=t.code,o=t.data,a=t.msg;"0"===i.toString()?(e.paymentName=o.paymentName,e.paymentColor=o.color,e.paymentFieldList=o.paymentFieldList,e.setFormData(o.paymentFieldList),e.loading=!1):(e.loading=!1,e.$bus.$emit("tip",{text:a,type:"error"}))}))},setFormData:function(e){var t=this;e.forEach((function(e){4===e.fieldType?t.$set(t.formData,e.fieldName,t.userName):t.$set(t.formData,e.fieldName,e.fieldValue),t.$set(t.error,e.fieldName,""),e.fieldRequired&&t.requireList.push(e),e.fieldRegex&&t.regex.push(e)}))},inputChange:function(e,t){this.formData[t]=e;var i=this.requireList.find((function(e){return e.fieldName===t})),o=this.regex.find((function(e){return e.fieldName===t}));if(i&&!e)this.error[t]="".concat(this.$t("personal.leaglTenderSet.hint")).concat(i.fieldTitle);else if(o&&e){var a=new RegExp(o.fieldRegex);a.test(e)?this.error[t]="":this.error[t]=this.$t("personal.leaglTenderSet.error")}else this.error[t]=""},uploadChange:function(e,t){var i=e.url;this.formData[t]=i;var o=this.requireList.find((function(e){return e.fieldName===t}));this.error[t]=o&&!i?"".concat(this.$t("personal.leaglTenderSet.upload")).concat(o.fieldTitle):""},deleteImg:function(e){this.formData[e]=""},validateForm:function(){var e=this,t=!0;return this.requireList.forEach((function(i){var o=i.fieldName,a=i.fieldTitle,r=i.fieldType,s=e.formData[o];s||3!==r?s?e.error[o]="":(t=!1,e.error[o]="".concat(e.$t("personal.leaglTenderSet.hint")).concat(a)):(t=!1,e.error[o]="".concat(e.$t("personal.leaglTenderSet.upload")).concat(a))})),this.regex.forEach((function(i){var o=i.fieldName,a=i.fieldRegex,r=new RegExp(a),s=e.formData[o];s&&!r.test(s)?(t=!1,e.error[o]=e.$t("personal.leaglTenderSet.error")):e.error[o]=""})),t},confirm:function(){var e=this.validateForm();e&&(this.dialogFlag=!0)},getCodeClick:function(e,t){var i=this;this.axios({url:"v4/common/smsValidCode",params:{operationType:28,smsType:t&&"voiceSms"===t?"1":"0"}}).then((function(e){if("0"!==e.code.toString())setTimeout((function(){i.$bus.$emit("getCode-clear","withdrawGetcode"),i.$bus.$emit("tip",{text:e.msg,type:"error"})}),2e3);else{var o=t&&"voiceSms"===t?i.$t("login.voiceSendSuccess"):i.$t("login.phoneSendSuccess");i.$bus.$emit("tip",{text:o,type:"success"}),i.smsType="sms"===t?"sms":"voiceSms"}}))},codeChange:function(e,t){this[t]=e},dialogClose:function(){this.phoneValue="",this.googleValue="",this.dialogFlag=!1},dialogConfirm:function(){if(!this.loading){this.loading=!0;var e=n(n({payment:this.payment},this.formData),{},{smsAuthCode:"sms"===this.smsType&&this.phoneValue?this.phoneValue:void 0,voiceSmsCode:"voiceSms"===this.smsType&&this.phoneValue?this.phoneValue:void 0,googleCode:this.googleValue});this.isEdit?(e.id=this.id,this.$store.dispatch("otcPaymentUpdate",e)):this.$store.dispatch("otcPaymentAdd",e)}}}},c=(i("6351"),{mixins:[l],mounted:function(){this.init()}}),d=c,u=i("2877"),p=Object(u["a"])(d,o,a,!1,null,null,null);t["default"]=p.exports}}]);