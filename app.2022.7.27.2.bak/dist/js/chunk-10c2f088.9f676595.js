(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10c2f088"],{"4e7c":function(t,e,s){},b3c5:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"personal-bankCard fuz-card"},[e("p",{staticClass:"user-management-child-header fuz-card-title"},[t._v(t._s(t.title))]),e("div",{staticClass:"bankCard-form fuz-card-content"},[e("div",{staticClass:"select-fiat b-2-cl"},[t._v(t._s(t.$t("fiatAccount.selectFiat")))]),e("ul",{staticClass:"fiat-list"},t._l(t.fiatSymbolList,(function(s,n){return e("li",{key:n,staticClass:"fiat-item"},[e("c-checkBox",{attrs:{value:t.supportSymbols.indexOf(s.symbol)>-1},on:{click:function(e){return t.checkSymbol(s)}}}),t._v("\n          "+t._s(s.symbol)+"\n      ")],1)})),0),e("c-newSelect",{attrs:{value:t.bank,type:"icon",promptText:t.$t("fiatAccount.selectBank"),errorHave:!0,name:"bank",options:t.bankList,filterable:!0,disabled:"modify"===t.type},on:{onChanges:t.bankChange}}),e("c-inputLine",{attrs:{name:"bankAccount",promptText:t.$t("fiatAccount.prompt"),errorHave:!0,marginTop:"0px",value:t.bankAccount},on:{onchanges:t.inputChanges}}),e("c-inputLine",{attrs:{name:"bankCardNum",promptText:t.$t("fiatAccount.bankCardNum"),errorHave:!0,marginTop:"0px",value:t.bankCardNum},on:{onchanges:t.inputChanges}}),e("c-inputLine",{attrs:{name:"remark",promptText:t.remarkPrompt,errorHave:!0,marginTop:"0px",value:t.remark},on:{onchanges:t.inputChanges}}),e("c-inputLine",{directives:[{name:"show",rawName:"v-show",value:t.isShowSmsCode,expression:"isShowSmsCode"}],attrs:{maxLength:"6",name:"smsCode",inputType:"text",promptText:t.$t("personal.label.smsCodeText"),errorHave:!0,marginTop:"0px",value:t.smsCode},on:{onchanges:t.inputChanges}},[e("c-getCode",{attrs:{name:"phone",autoStart:!1,voiceOpen:t.voiceSmsOpen,buttonName:"loginGetcodeBtn"},on:{click:t.getCodeClick}})],1),e("c-inputLine",{directives:[{name:"show",rawName:"v-show",value:t.isShowGoogleCode||t.enforceGoogleAuth,expression:"isShowGoogleCode || enforceGoogleAuth"}],attrs:{maxLength:"6",name:"googleCode",inputType:"text",promptText:t.$t("personal.label.googleCodeText"),errorHave:!0,marginTop:"0px",value:t.googleCode},on:{onchanges:t.inputChanges}}),e("c-button",{attrs:{type:"solid",big:!0,className:"fuz-primary-btn",paddingW:"0px",disabled:!t.canSubmit,marginTop:"18px",height:"40px",width:"100%"},on:{click:t.submit}},[t._v(t._s(t.$t("personal.tool.submit"))+"\n    ")])],1),e("c-verifyCationc-alert",{attrs:{showFlag:t.alertFlag,imgMap:t.imgMap,titleText:t.$t("assets.withdraw.safetyWarning"),detaText:t.authTitleText,dataList:t.alertData,buttonText:t.$t("assets.withdraw.GotoOpen")},on:{close:t.alertClone,confirm:t.alertGo}})],1)},o=[],i=(s("28a5"),s("96cf"),s("3b8d")),a=(s("c5f6"),s("6b54"),s("95d5")),r={name:"bindBankCard",data:function(){return{fiatSymbolList:[],supportSymbols:[],imgMap:a["s"],bankId:null,bankList:[],bank:"",bankAccount:"",bankCardNum:"",remark:"",smsCode:"",smsType:"",googleCode:"",isShowSmsCode:!1,isShowGoogleCode:!1,alertFlag:!1}},computed:{userInfo:function(){return this.$store.state.baseData.userInfo},voiceSmsOpen:function(){return this.$store.state.baseData.voiceSmsOpen},sendSmsCode:function(){return this.$store.state.personal.sendSmsCode},enforceGoogleAuth:function(){return this.$store.state.baseData.is_enforce_google_auth||0},type:function(){return this.$route.query.type},title:function(){var t=this.$route.query.type;return"add"===t?this.$t("fiatAccount.addAccount"):this.$t("fiatAccount.modifyAccount")},remarkPrompt:function(){return"".concat(this.$t("fiatAccount.bankBranch"),"/").concat(this.$t("fiatAccount.remark"),"/IFSC")},canSubmit:function(){var t=!0;return this.bank&&this.bankAccount&&this.bankCardNum||(t=!1),this.isShowSmsCode&&!this.smsCode&&(t=!1),!this.isShowGoogleCode&&!this.enforceGoogleAuth||this.googleCode||(t=!1),t},OpenMobile:function(){var t=!1,e=this.userInfo;return e&&"1"===e.isOpenMobileCheck.toString()&&(t=!0),t},OpenGoogle:function(){var t=!1,e=this.userInfo;return e&&"1"===e.googleStatus.toString()&&(t=!0),t},authTitleText:function(){var t=this.enforceGoogleAuth?"assets.withdraw.enforceGoogleAuth":"assets.withdraw.safetyWarningError";return this.$t(t)},alertData:function(){var t=[{text:this.$t("assets.withdraw.bindGoogle"),flag:this.OpenGoogle}];return this.enforceGoogleAuth||t.push({text:this.$t("assets.withdraw.bindPhone"),flag:this.OpenMobile}),t},userInfoIsReady:function(){return this.$store.state.baseData.userInfoIsReady}},watch:{userInfo:function(t){null!==t&&(this.isShowGoogleCode=!!Number(t.googleStatus),this.isShowSmsCode=!!Number(t.isOpenMobileCheck))},sendSmsCode:function(t){null!==t&&("success"===t.text?(this.$bus.$emit("tip",{text:t.msg,type:"success"}),this.$store.dispatch("resetType"),this.smsType="1"===t.type?"voiceSms":"sms"):(this.$bus.$emit("tip",{text:t.msg,type:"error"}),this.$store.dispatch("resetType"),this.$bus.$emit("getCode-clear","phone")))},userInfoIsReady:function(t){t&&this.canAlert()}},methods:{checkSymbol:function(t){var e=this.supportSymbols.indexOf(t.symbol);e>-1?this.supportSymbols.splice(e,1):this.supportSymbols.push(t.symbol)},init:function(){this.userInfo&&(this.isShowGoogleCode=!!Number(this.userInfo.googleStatus),this.isShowSmsCode=!!Number(this.userInfo.isOpenMobileCheck)),this.userInfoIsReady&&this.canAlert(),this.getBankList(),"modify"===this.type&&(this.bankId=this.$route.query.id,this.getUserBank())},canAlert:function(){this.OpenGoogle||!this.enforceGoogleAuth&&this.OpenMobile?this.alertFlag=!1:this.alertFlag=!0},alertClone:function(){this.alertFlag=!1},alertGo:function(){this.$router.push("/personal/userManagement")},getUserBank:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios({url:"fiat/fiat_user_bank_list",params:{id:this.bankId}}).then((function(t){var s=t.code,n=t.data,o=t.msg;"0"===s.toString()?n.list&&n.list.length&&(e.bankAccount=n.list[0].bankAccount,e.bankCardNum=n.list[0].bankCardNumber,e.remark=n.list[0].remark,e.supportSymbols=n.list[0].supportSymbols.split(",")):e.$bus.$emit("tip",{text:o,type:"error"})}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBankList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios({url:"fiat/fiat_support_bank_list"}).then((function(t){var s=t.code,n=t.data,o=t.msg;"0"===s.toString()?n.list&&n.list.length&&(e.bankList=n.list.map((function(t){var e=t;return e.code=t.bankName,e.value=t.bankNameShow,e})),e.fiatSymbolList=n.fiatSymbolList,"add"===e.type?e.bank=e.bankList[0].bankName:e.bank=e.$route.query.bankName):e.$bus.$emit("tip",{text:o,type:"error"})}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),bankChange:function(t){this.bank=t.code,this.bankAccount="",this.bankCardNum="",this.remark="",this.smsCode="",this.googleCode="",this.voiceSmsCode=""},inputChanges:function(t,e){this[e]=t},getCodeClick:function(t,e){this.$bus.$emit("getCode-start","phone");var s={operationType:28,smsType:e&&"voiceSms"===e?"1":"0"};this.smsType=e,this.$store.dispatch("sendSmsCode",s)},submit:function(){var t=this;if(this.canAlert(),!this.alertFlag){var e=this.supportSymbols.join(","),s="add"===this.type?"fiat/fiat_user_bank_add":"fiat/fiat_usr_bank_edit";this.axios({url:s,params:{id:this.bankId||void 0,bankName:this.bank,bankAccount:this.bankAccount,bankCardNumber:this.bankCardNum,remark:this.remark,googleCode:this.googleCode,smsCode:"sms"===this.smsType?this.smsCode:void 0,voiceSmsCode:"voiceSms"===this.smsType?this.smsCode:void 0,supportSymbols:e}}).then((function(e){var s=e.code,n=e.msg;"0"===s.toString()?(t.$bus.$emit("tip",{text:n,type:"success"}),t.$router.push("/personal/fiatAccount")):t.$bus.$emit("tip",{text:n,type:"error"})}))}}}},u=(s("4e7c"),{mixins:[r],mounted:function(){this.init()}}),c=u,h=s("2877"),l=Object(h["a"])(c,n,o,!1,null,null,null);e["default"]=l.exports}}]);