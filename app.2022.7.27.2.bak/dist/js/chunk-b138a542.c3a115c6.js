(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b138a542"],{1668:function(t,e,s){"use strict";s("7f7f");var a=function(){var t=this,e=t._self._c;return e("c-v5-dialog",{attrs:{showFlag:t.transferFlag,paddingBottom:"32px",titleText:t.$t("assets.leverageRepayment.title"),confirmLoading:t.transferConfirmLoading,confirmDisabled:t.transferConfirmDisabled},on:{close:t.transferDialogClose,confirm:t.transferDialogConfirm}},[e("section",{staticClass:"v5-repayment-box"},[e("ul",{staticClass:"repayment-list"},[e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.symbol")))]),e("span",{staticClass:"value v5-5-cl"},[t._v(t._s(t.getShowSymbol(t.transferObj.name)))])]),e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.coin")))]),e("span",{staticClass:"value v5-5-cl"},[t._v(t._s(t.getShowCoin(t.repaymentMess.coin)))])]),e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.Surplus")))]),e("span",{staticClass:"value v5-5-cl"},[t._v("\n          "+t._s(t._f("fixDReturnFn")(t.repaymentMess.Surplus,this))+"\n           "+t._s(t.getShowCoin(t.repaymentMess.coin)))])]),e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.sum")))]),e("span",{staticClass:"value v5-5-cl"},[t._v("\n          "+t._s(t._f("fixDFn")(t.repaymentMess.sum,this))+" "+t._s(t.getShowCoin(t.repaymentMess.coin))+"\n        ")])]),e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.rate")))]),e("span",{staticClass:"value v5-5-cl"},[t._v("\n          "+t._s(t._f("fixDReturnFn")(t.repaymentMess.rate,this))+" "+t._s(t.getShowCoin(t.repaymentMess.coin))+"\n        ")])])]),e("div",{staticClass:"repayment-num"},[e("c-v5-input",{attrs:{name:"transferValue",width:"378px",value:t.transferValue,promptText:t.$t("assets.leverageRepayment.RepaymentNum"),prompClass:"v5-6-cl",errorHave:!0,errorFlag:t.inputMess.showError,errorText:t.inputMess.text,warningText:t.transferWarningText},on:{onChanges:t.inputLineChange}},[e("c-v5-button",{attrs:{slot:"append",type:"text"},on:{click:t.allTransfer},slot:"append"},[t._v("\n          "+t._s(t.$t("assets.otcAccount.all"))+"\n        ")])],1)],1)])])},n=[],i=(s("6b54"),s("c5f6"),s("95d5")),r={data:function(){return{transferConfirmLoading:!1,transferFlag:!1,transferValue:"",transferCoin:"",transferObj:{},axiosFlag:!1,symbol:"",repaymentData:{}}},filters:{fixDFn:function(t){return Object(i["f"])(t,8)},fixDReturnFn:function(t){return Object(i["f"])(t,8)}},watch:{market:function(t){t&&this.axiosFlag&&this.getData()},transferValue:function(t){this.transferValue=Object(i["h"])(t,8)}},computed:{inputMess:function(){var t={flag:!1,showError:!1,text:""},e=Number(this.transferValue),s=Number(this.transferCanNum),a=Number(Object(i["f"])(this.repaymentMess.Surplus,this.returnFix)),n=Number(this.transferMinNum),r=!0;if(n>a&&(r=!1),0===e)t.flag=!1,t.text="",t.showError=!1;else if(n>e&&r){t.flag=!1,t.showError=!0;var o=this.$t("assets.leverageRepayment.error1");t.text="".concat(o," ").concat(Object(i["f"])(n,this.transferCoinFix)," ").concat(this.transferCoin)}else e>s?(t.flag=!1,t.showError=!0,t.text=this.$t("assets.leverageRepayment.error2")):e>a?(t.flag=!1,t.showError=!0,t.text=this.$t("assets.leverageRepayment.error3")):(t.flag=!0,t.text="",t.showError=!1);return t},repaymentMess:function(){var t={coin:"",sum:"",rete:"",Surplus:""},e=this.repaymentData,s=e.coin,a=e.borrowMoney,n=e.oweInterest,i=e.oweAmount;return t.coin=s,t.sum=a||0,t.rate=n||0,t.Surplus=(n||0)+(i||0),t},market:function(){return this.$store.state.baseData.market},transferWarningText:function(){var t=this.$t("assets.leverageRepayment.can"),e=Object(i["f"])(this.transferCanNum,8);return"".concat(t," ").concat(e," ").concat(this.getShowCoin(this.transferCoin)," ")},transferCoinFix:function(){var t=0;return this.market&&this.market.coinList&&this.market.coinList[this.transferCoin]&&(t=this.market.coinList[this.transferCoin].showPrecision),Number(t)},returnFix:function(){var t=this.transferObj.baseReturnPrecision||0;return this.repaymentMess.coin===this.transferObj.quoteCoin&&(t=this.transferObj.quoteReturnPrecision),t},transferConfirmDisabled:function(){if(this.transferConfirmLoading)return!1;var t=!0;return this.inputMess.flag&&(t=!1),t},transferCanNum:function(){var t=this.transferObj,e=t.baseNormalBalance,s=t.quoteNormalBalance,a=t.baseCoin,n=t.quoteCoin,i="";return this.transferCoin===a?i=e:this.transferCoin===n&&(i=s),Number(i)},transferMinNum:function(){var t=this.transferObj,e=t.baseMinPayment,s=t.quoteMinPayment,a=t.baseCoin,n=t.quoteCoin,i="";return this.transferCoin===a?i=e:this.transferCoin===n&&(i=s),Number(i)}},methods:{init:function(){var t=this;this.$bus.$on("openRepayment",(function(e){var s=e.symbol,a=e.coin;t.repaymentData=e,t.axiosFlag=!0,t.symbol=s,t.transferFlag=!0,t.transferCoin=a,t.market&&t.getData()}))},getShowSymbol:function(t){if(!this.market)return t;var e=this.market.market,s=t;if(this.market&&e&&this.transferObj.quoteCoin){var a=e[this.transferObj.quoteCoin][this.transferObj.name];s=a.showName||a.name}return s},getShowCoin:function(t){if(!this.market)return t;var e=this.market.coinList,s=t;return this.market&&e&&(s=Object(i["l"])(t,e)),s},getData:function(){var t=this;this.axiosFlag=!1;var e={symbol:this.symbol};this.axios({url:"lever/finance/symbol/balance",params:e}).then((function(e){"0"===e.code.toString()&&(t.transferObj=e.data)}))},allTransfer:function(){var t=this.repaymentMess.Surplus,e="";e=Number(t)>Number(this.transferCanNum)?Number(this.transferCanNum):Number(t),this.transferValue=Object(i["f"])(e,this.returnFix)},inputLineChange:function(t,e){this[e]=t},clearTransfer:function(){this.transferFlag=!1,this.transferValue="",this.transferCoin="",this.transferConfirmLoading=!1,this.$set(this,"transferObj",{})},transferDialogClose:function(){this.clearTransfer()},transferDialogConfirm:function(){var t=this;this.transferConfirmLoading=!0;var e={id:this.repaymentData.id,amount:this.transferValue};this.axios({url:"lever/finance/return",params:e}).then((function(e){t.transferConfirmLoading=!1,"0"===e.code.toString()?(t.clearTransfer(),t.$emit("success"),t.$bus.$emit("tip",{text:e.msg,type:"success"})):t.$bus.$emit("tip",{text:e.msg,type:"error"})}))}}},o=(s("ed09"),{mixins:[r],mounted:function(){this.init()}}),c=o,l=s("2877"),u=Object(l["a"])(c,a,n,!1,null,null,null);e["a"]=u.exports},"62fa":function(t,e,s){},"923a":function(t,e,s){"use strict";s.r(e);s("7f7f"),s("ac6a"),s("456d");var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"v5-page-leverafeToLoan"},[e("div",{staticClass:"toLoan-form fuz-card-plain"},[e("header",{staticClass:"toLoan-header v5-5-cl"},[e("svg",{staticClass:"icon icon-20",attrs:{"aria-hidden":"true"},on:{click:t.goBack}},[e("use",{attrs:{"xlink:href":"#icon-v5_36"}})]),e("span",[t._v(t._s(t.$t("assets.leverageToLoan.title")))])]),Object.keys(t.messData).length?e("div",{staticClass:"toLoan-details"},[e("div",{staticClass:"details-left"},[e("div",{staticClass:"symbol v5-5-cl"},[t._v(t._s(t.getShowSymbol(t.messData.name)))]),e("div",{staticClass:"numberList"},[e("ul",{staticClass:"numberList-key"},[e("li",[t._v(t._s(t.$t("assets.leverageToLoan.can"))+" "+t._s(t.getShowCoin(t.messData.baseCoin)))]),e("li",[t._v(t._s(t.$t("assets.leverageToLoan.can"))+" "+t._s(t.getShowCoin(t.messData.quoteCoin)))])]),e("ul",{staticClass:"numberList-value v5-5-cl"},[e("li",[e("span",{staticClass:"text"},[t._v(t._s(t._f("fixDFn")(t.messData.baseNormalBalance,this,"base")))]),e("c-v5-button",{attrs:{type:"text",height:"16px",className:"even-button"},on:{click:function(e){return t.transfer(t.messData.baseCoin)}}},[t._v("\n                "+t._s(t.$t("assets.leverageToLoan.transfer")))])],1),e("li",[e("span",{staticClass:"text"},[t._v(t._s(t._f("fixDFn")(t.messData.quoteNormalBalance,this,"quote")))]),e("c-v5-button",{attrs:{type:"text",height:"16px",className:"even-button"},on:{click:function(e){return t.transfer(t.messData.quoteCoin)}}},[t._v("\n                "+t._s(t.$t("assets.leverageToLoan.transfer")))])],1)])]),e("div",{staticClass:"details-warking b-7-cl"},[e("svg",{staticClass:"icon icon-12",staticStyle:{marginRight:"4px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-c_2"}})]),t._v(t._s(t.$t("assets.leverageToLoan.warning"))+"\n        ")])]),e("div",{staticClass:"cut-line v5-12-bg"}),e("div",{staticClass:"details-right"},[e("div",{staticClass:"coinType"},[e("div",{staticClass:"form-title v5-6-cl"},[t._v("\n            "+t._s(t.$t("assets.leverageToLoan.ToLoan"))+t._s(t.$t("assets.leverageToLoan.list3"))+"\n          ")]),e("ul",{staticClass:"coin-list"},[e("li",{staticClass:"list-item",class:{"u-16-cl v5-1-bg":t.broCoin===t.messData.baseCoin,"v5-9-bg":t.broCoin!==t.messData.baseCoin,"v5-5-cl":t.coinHover===t.messData.baseCoin&&t.broCoin!==t.messData.baseCoin,"v5-6-cl ":t.messData.baseCoin!==t.coinHover&&t.messData.baseCoin!==t.broCoin},on:{mouseover:function(e){t.coinHover=t.messData.baseCoin},mouseout:function(e){t.coinHover=null},click:function(e){return t.setBroCoin(t.messData.baseCoin)}}},[t._v("\n              "+t._s(t.getShowCoin(t.messData.baseCoin))+"\n            ")]),e("li",{staticClass:"list-item",class:{"u-16-cl v5-1-bg":t.broCoin===t.messData.quoteCoin,"v5-9-bg":t.broCoin!==t.messData.quoteCoin,"v5-5-cl":t.coinHover===t.messData.quoteCoin&&t.broCoin!==t.messData.quoteCoin,"v5-6-cl ":t.messData.quoteCoin!==t.coinHover&&t.messData.quoteCoin!==t.broCoin},on:{mouseover:function(e){t.coinHover=t.messData.quoteCoin},mouseout:function(e){t.coinHover=null},click:function(e){return t.setBroCoin(t.messData.quoteCoin)}}},[t._v("\n              "+t._s(t.getShowCoin(t.messData.quoteCoin))+"\n            ")])])]),e("ul",{staticClass:"coinDeat"},[e("li",{staticClass:"v5-9-bg"},[e("div",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageToLoan.max")))]),e("div",{staticClass:"value v5-5-cl"},[t._v("\n              "+t._s(t._f("fixDFnTwo")(t.broMessage.total,8))+"\n            ")])]),e("li",{staticClass:"v5-9-bg"},[e("div",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageToLoan.borrowed")))]),e("div",{staticClass:"value v5-5-cl"},[t._v("\n              "+t._s(t._f("fixDFnTwo")(t.broMessage.borrowed,8))+"\n            ")])]),e("li",{staticClass:"v5-9-bg"},[e("div",{staticClass:"key"},[t._v("\n              "+t._s(t.$t("assets.leverageToLoan.rate"))+"\n              "),e("div",{staticClass:"tolanIcon",on:{mouseover:function(e){t.iconHover=!0},mouseout:function(e){t.iconHover=!1}}},[t.iconHover?t._e():e("svg",{staticClass:"icon icon-12 icon-mark",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-assets_6"}})]),t.iconHover?e("svg",{staticClass:"icon icon-12",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-assets_6_h"}})]):t._e(),e("c-popover",{attrs:{show:t.iconHover,id:"popover",content:t.$t("assets.leverageToLoan.rateMark"),parent:".icon-mark"}})],1)]),e("div",{staticClass:"value v5-5-cl"},[t._v(t._s(t._f("rateFix")(t.messData.rate)))])])]),e("div",{staticClass:"borrow-num"},[e("c-v5-input",{attrs:{name:"broNum",width:"378px",promptText:t.$t("assets.leverageToLoan.number"),promptClass:"v5-6-cl",errorHave:!0,value:t.broNum,errorFlag:t.broErrorObj.showError,errorText:t.broErrorObj.text,warningText:t.broWarningText},on:{onChanges:t.inputChange}},[e("div",{attrs:{slot:"append"},slot:"append"},[e("c-v5-button",{attrs:{type:"text"},on:{click:t.allBro}},[t._v("\n                "+t._s(t.$t("assets.otcAccount.all"))+"\n              ")])],1)])],1),e("div",{staticClass:"submit-btn"},[e("c-v5-button",{attrs:{width:"378px",height:"40px",loading:t.btnLoading,disabled:t.btnDisabled},on:{click:t.broClick}},[t._v(t._s(t.$t("assets.leverageToLoan.ToLoan")))])],1)])]):t._e()]),e("div",{staticClass:"toLoanRecord v5-5-cl fuz-card"},[e("div",{staticClass:"toLoanRecord-title fuz-card-title"},[e("span",{staticClass:"title-text"},[t._v("\n        "+t._s(t.$t("assets.leverageToLoan.listTitle"))+"\n        "),e("span",{staticClass:"title-line v5-1-bg fuz-none"})]),e("span",{staticClass:"all-record v5-1-cl",on:{click:t.lookAll}},[t._v(t._s(t.$t("assets.otcAccount.all")))])]),e("div",{staticClass:"toLoan-table"},[e("c-v5-table",{attrs:{imgMap:t.imgMap,colorMap:t.colorMap,loading:t.tabelLoading,bodyHeight:420,columns:t.columns,dataList:t.tabelList,subFlag:!0,subContent:t.subContent,subColumns:t.subColumns,subContentId:t.subContentId},scopedSlots:t._u([{key:"coin",fn:function(s){return t.coinList&&t.coinList[s.row.coin]?e("dl",{staticClass:"table-coin"},[e("dt",[e("img",{attrs:{src:t.coinList[s.row.coin].icon,alt:""}})]),e("dd",[e("div",{staticClass:"coinShowName v5-5-cl"},[t._v(t._s(t._f("getCoinShowName")(s.row.coin,t.coinList)))]),e("div",{staticClass:"coinLongName v5-6-cl"},[t._v("\n              "+t._s(t.coinList[s.row.coin].longName||s.row.coin)+"\n            ")])])]):t._e()}},{key:"operation",fn:function(s){return e("div",{staticClass:"operation"},t._l(s.row.operation,(function(a,n){return e("c-v5-button",{key:n,staticClass:"operation-btn",attrs:{type:"text",paddingW:"0"},on:{click:function(e){return t.tableClick(a.type,s.row.id)}}},[t._v("\n            "+t._s(a.text)+"\n          ")])})),1)}}],null,!0)}),t.paginationObj.total>t.paginationObj.display?e("c-v5-pagination",{attrs:{total:t.paginationObj.total,display:t.paginationObj.display,currentPage:t.paginationObj.currentPage},on:{pagechange:t.pagechange}}):t._e()],1)]),e("leverageTransfer",{attrs:{leverMap:t.leverMap},on:{success:t.transferSuccess,showLoading:t.showLoading}}),e("leverageRepayment",{on:{success:t.repaymentSuccess}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"assets-loading"},[e("c-loading",{attrs:{size:"50"}})],1)],1)},n=[],i=(s("a481"),s("28a5"),s("6b54"),s("c5f6"),s("95d5")),r={name:"page-withdraw",data:function(){return{tabelLoading:!0,imgMap:i["s"],colorMap:i["b"],tabelList:[],paginationObj:{total:0,display:10,currentPage:1},messData:{},broCoin:"",broNum:"",btnLoading:!1,dataList:{},coinHover:null,iconHover:!1,loading:!1,leverMap:{},subContent:[],subContentId:null}},filters:{fixDFn:function(t,e,s){return Object(i["f"])(t,e.coinFix[s])},fixDFnTwo:function(t,e){return Object(i["f"])(t,e)},rateFix:function(t){var e=t||0;return"".concat(Object(i["f"])(100*e,2),"%")},getCoinShowName:function(t,e){return Object(i["l"])(t,e)}},watch:{messData:function(t){Object.keys(t).length&&(this.broCoin=t.baseCoin,Object.keys(this.market).length&&this.getTableList())},market:function(t){Object.keys(t).length&&Object.keys(this.messData).length&&this.getTableList()},broNum:function(t){this.broNum=Object(i["h"])(t,3)}},computed:{btnDisabled:function(){var t=!0;return(this.broErrorObj.flag||this.btnLoading)&&(t=!1),t},broMessage:function(){var t={total:"0",can:"0",borrowed:"0",type:"base",min:"0"},e=this.messData,s=e.baseCoin,a=e.baseTotalBorrow,n=e.baseCanBorrow,i=e.baseBorrowBalance,r=e.baseMinBorrow,o=e.quoteCoin,c=e.quoteTotalBorrow,l=e.quoteCanBorrow,u=e.quoteBorrowBalance,h=e.quoteMinBorrow;return this.broCoin===s?(t.total=a||0,t.can=n||0,t.borrowed=i||0,t.type="base",t.min=r||0):this.broCoin===o&&(t.total=c||0,t.can=l||0,t.borrowed=u||0,t.type="quote",t.min=h||0),t},market:function(){return this.$store.state.baseData.market||{}},coinList:function(){return this.market&&this.market.coinList},columns:function(){return[{key:"coin",title:this.$t("assets.leverageToLoan.list3"),width:"15%"},{key:"account",title:this.$t("assets.leverageToLoan.list2"),width:"13%"},{key:"time",title:this.$t("assets.leverageToLoan.list1"),width:"13%"},{key:"amount",title:this.$t("assets.leverageToLoan.list4"),width:"13%"},{key:"rate",title:this.$t("assets.leverageToLoan.list5"),width:"13%"},{key:"interest",title:this.$t("assets.leverageToLoan.list6"),width:"13%"},{key:"oweAmount",title:this.$t("assets.leverageToLoan.list7"),width:"10%"},{key:"operation",title:this.$t("assets.leverageToLoan.list8"),width:"10%"}]},subColumns:function(){return[{key:"coin",title:this.$t("assets.leverageToLoan.list3")},{key:"time",title:this.$t("order.exchangeOrder.detailsTime")},{key:"volume",title:this.$t("order.exchangeOrder.detailsVolume")},{key:"type",title:this.$t("assets.flowingWater.type")}]},coinFix:function(){var t=this.market.coinList,e={base:0,quote:0};if(t&&Object.keys(this.messData).length){var s=this.messData,a=s.baseCoin,n=s.quoteCoin;t[a]&&(e.base=t[a].showPrecision),t[n]&&(e.quote=t[n].showPrecision)}return e},broWarningText:function(){var t=this.broMessage.can,e=Object(i["f"])(t,3);return"".concat(this.$t("assets.leverageToLoan.canToLoan")," ").concat(e,"\n        ").concat(this.getShowCoin(this.broCoin))},broErrorObj:function(){var t={flag:!1,text:"",showError:!1};if(0===Number(this.broNum))t.flag=!1,t.text="",t.showError=!1;else if(Number(this.broNum)>Number(this.broMessage.can))t.flag=!1,t.text=this.$t("assets.leverageToLoan.inputError1"),t.showError=!0;else if(Number(this.broNum)<Number(this.broMessage.min)){t.flag=!1;var e=this.broMessage,s=e.min,a=e.type,n=Object(i["f"])(s,this.coinFix[a]),r=this.$t("assets.leverageToLoan.inputError2");t.text="".concat(r," ").concat(n," ").concat(this.broCoin),t.showError=!0}else t.flag=!0,t.text="",t.showError=!1;return t}},methods:{init:function(){this.$route.query.symbol?(this.symbol=this.$route.query.symbol.toUpperCase(),this.getData(),Object.keys(this.market).length&&Object.keys(this.messData).length&&this.getTableList()):this.$router.push("/newAssets/leverageAccount")},goBack:function(){this.$router.back()},getShowSymbol:function(t){if(!this.market)return t;var e=this.market.market,s=t;if(this.market&&e){var a=e[this.messData.quoteCoin][this.messData.name];s=a.showName||a.name}return s},getShowCoin:function(t){if(!this.market)return t;var e=this.market.coinList,s=t;return this.market&&e&&(s=Object(i["l"])(t,e)),s},rateFixFn:function(t){return"".concat(Object(i["f"])(100*t,2),"%")},allBro:function(){this.broNum=this.broMessage.can},transferSuccess:function(){this.getData()},repaymentSuccess:function(){this.getData(),this.getTableList()},lookAll:function(){this.$router.push("/newAssets/lerverageFlowingWater")},getData:function(){var t=this,e={symbol:this.symbol};this.axios({url:"lever/finance/symbol/balance",params:e}).then((function(e){"0"===e.code.toString()&&(t.messData=e.data)}))},pagechange:function(t){this.paginationObj.currentPage=t,this.getTableList()},showLoading:function(t){this.loading=t},getLeverMap:function(t){var e=this;this.loading=!0,this.axios({url:"lever/finance/balance"}).then((function(s){if(e.loading=!1,"0"===s.code.toString()){var a=s.data.leverMap;e.leverMap=a,t&&t()}}))},transfer:function(t){var e=this;this.getLeverMap((function(){e.$bus.$emit("openTransfer",e.messData.name,t,e.messData.symbol)}))},setBroCoin:function(t){this.broCoin!==t&&(this.broCoin=t,this.broNum="")},inputChange:function(t,e){this[e]=t},broClick:function(){var t=this;this.btnLoading=!0,this.axios({url:"lever/finance/borrow",params:{symbol:this.symbol,coin:this.broCoin,amount:this.broNum}}).then((function(e){t.btnLoading=!1,"0"===e.code.toString()?(t.getData(),t.getTableList(),t.$bus.$emit("tip",{text:e.msg,type:"success"}),t.broNum=""):t.$bus.$emit("tip",{text:e.msg,type:"error"})}))},tableClick:function(t,e){if("repayment"===t){var s=e.split("_")[1],a=this.dataList[s];this.$bus.$emit("openRepayment",a)}else"detail"===t&&this.getSubTableData(e)},getSubTableData:function(t){var e=this;if(this.subContentId===t)this.subContentId=null;else{var s=t.split("_"),a=Number(s[1]);this.loading=!0,this.subContent=[],this.axios({url:"lever/return/info",method:"post",params:{id:a.toString(),pageSize:1e4}}).then((function(s){if(e.loading=!1,"0"===s.code.toString()){var a=[];s.data.financeList.forEach((function(t){var s=8;a.push({time:Object(i["k"])(Number(t.repaymentTime)),coin:e.getShowCoin(t.coin),volume:Object(i["f"])(t.returnMoney,s),type:e.typeText(t.type.toString())})})),e.subContentId=t,e.subContent=a}else e.$bus.$emit("tip",{text:s.msg,type:"error"})}))}},typeText:function(t){var e="";switch(t){case"1":e=this.$t("assets.leverageToLoan.typeText1");break;case"2":e=this.$t("assets.leverageToLoan.typeText2");break;default:e=this.$t("assets.leverageToLoan.typeText3")}return e},thousands:function(t){if(t){var e=t.toString(),s=e.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return e.replace(s,"$1,")}return t},getTableList:function(){var t=this;this.axios({url:"lever/borrow/new",params:{pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,symbol:this.symbol}}).then((function(e){if("0"===e.code.toString()){t.tabelLoading=!1;var s=e.data,a=s.count,n=s.financeList,r=[];n.forEach((function(e){var s=8,a=8;t.dataList[e.id]=e,r.push({symbol:e.symbol,id:"".concat(e.symbol,"_").concat(e.id),coin:e.coin.toUpperCase(),account:e.showName||e.symbol.toUpperCase(),time:Object(i["k"])(Number(e.ctime)),amount:t.thousands(Object(i["f"])(e.borrowMoney,s)),rate:t.rateFixFn(e.interestRate),interest:t.thousands(Object(i["f"])(e.oweInterest,a)),oweAmount:t.thousands(Object(i["f"])(e.oweAmount,a)),operation:[{type:"detail",text:t.$t("order.exchangeOrder.details")},{type:"repayment",text:t.$t("assets.lerverageFlowingWater.repayment")}]})})),t.tabelList=r,t.paginationObj.total=a>30?30:a}}))}}},o=(s("62fa"),s("b1f7")),c=s("1668"),l={mixins:[r],components:{leverageTransfer:o["a"],leverageRepayment:c["a"]},mounted:function(){this.init()}},u=l,h=s("2877"),f=Object(h["a"])(u,a,n,!1,null,null,null);e["default"]=f.exports},b1f7:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("c-v5-dialog",{staticClass:"v5-transfer-dialog",attrs:{showFlag:t.showTransfer,titleText:t.$t("assets.otcAccount.CapitalTransfer"),confirmText:t.$t("assets.leverageAccount.transfer"),confirmDisabled:t.transferDisabled,size:"large"},on:{close:t.closeTransfer,confirm:t.confirmTransfer}},[e("div",{staticClass:"transfer-form"},[e("div",{staticClass:"transfer-account",class:{reverse:2===t.transferSide}},[e("div",{staticClass:"exchange account-side"},[e("c-v5-input",{attrs:{width:"184px",name:"exchangeAccount",readonly:!0,value:t.$t("assets.index.exchangeAccount")}},[e("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n                "+t._s(1===t.transferSide?t.$t("assets.otcAccount.from"):t.$t("assets.otcAccount.to"))+"\n              ")])]),e("div",{staticClass:"available v5-6-cl"},[t._v("\n                "+t._s(t.$t("assets.otcAccount.Available"))+":\n                "+t._s(t._f("thousands")(t.exchangeAvailable))+" "+t._s(t.transferCoin)+"\n              ")])],1),e("div",{staticClass:"change-icon"},[e("svg",{staticClass:"icon icon-24",attrs:{"aria-hidden":"true"},on:{click:t.changeTransferSide}},[e("use",{attrs:{"xlink:href":"#icon-assets_9"}})])]),e("div",{staticClass:"other account-side"},[e("c-v5-input",{attrs:{width:"184px",readonly:!0,value:t.$t("assets.index.leverage")}},[e("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n                "+t._s(2===t.transferSide?t.$t("assets.otcAccount.from"):t.$t("assets.otcAccount.to"))+"\n              ")])]),e("div",{staticClass:"available v5-6-cl"},[t._v("\n                "+t._s(t.$t("assets.otcAccount.Available"))+":\n                "+t._s(t._f("thousands")(t.otherAvailable))+" "+t._s(t.transferCoin)+"\n              ")])],1)]),e("div",{staticClass:"transfer-symbol"},[e("c-v5-select",{attrs:{width:"100%",name:"transferSymbol",imgMap:t.imgMap,filterable:!0,options:t.symbolList,value:t.transferSymbol},on:{onChanges:t.selectChange}},[e("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n              "+t._s(t.$t("order.exchangeOrder.coin"))+"\n            ")])])],1),e("div",{staticClass:"transfer-coin"},[e("c-v5-select",{attrs:{width:"100%",name:"transferCoin",imgMap:t.imgMap,options:t.leverCoinList,filterable:!0,value:t.transferCoin},on:{onChanges:t.selectChange}},[e("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n              "+t._s(t.$t("assets.otcAccount.coin"))+"\n            ")])])],1),e("div",{staticClass:"transfer-num"},[e("c-v5-input",{attrs:{width:"100%",name:"transferNum",placeholder:t.$t("trade.pleaseInput")+t.$t("assets.otcAccount.volume"),value:t.transferNum,clearable:!0,errorFlag:t.transferError,errorText:t.$t("assets.otcAccount.volumeError"),warningText:t.transferWarningText},on:{onChanges:t.inputChange}},[e("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n              "+t._s(t.$t("assets.otcAccount.volume"))+"\n            ")]),e("span",{staticClass:"transfer-all v5-1-cl",attrs:{slot:"append"},on:{click:t.transferAll},slot:"append"},[t._v(t._s(t.$t("assets.otcAccount.all")))])])],1)])])},n=[],i=(s("7f7f"),s("456d"),s("ac6a"),s("a481"),s("6b54"),s("c5f6"),s("95d5")),r={props:{leverMap:{type:Object,default:function(){}}},data:function(){return{imgMap:i["s"],showTransfer:!1,transferAccount:"",transferSide:1,transferSymbol:"",leverCoinList:[],transferCoin:"",transferNum:"",symbolList:[],symbolName:"",leverBalance:{}}},watch:{transferSymbol:function(t){if(t){var e=this.leverMap[t],s=e.baseCoin,a=e.quoteCoin,n=this.market.coinList;this.leverCoinList=[{img:n[s].icon,code:s,value:Object(i["l"])(s,n)},{img:n[a].icon,code:a,value:Object(i["l"])(a,n)}],(!this.transferCoin||this.transferCoin!==s&&this.transferCoin!==a)&&(this.transferCoin=this.leverCoinList[0].code)}else this.leverCoinList=[]},transferNum:function(t){this.transferNum=Object(i["h"])(t,this.transferCoinFix)},symbolName:function(t){t&&this.getLeverBalance()},leverMap:{handler:function(t){t&&this.setLeverData()},deep:!0}},computed:{market:function(){return this.$store.state.baseData.market},transferWarningText:function(){var t=this.$t("assets.otcAccount.can"),e=Object(i["f"])(this.transferCanNum,this.transferCoinFix);return 2===this.transferSide&&(e=Object(i["f"])(this.transferCanNum,8)),"".concat(t," ").concat(e," ").concat(this.getShowCoin(this.transferCoin)," ")},transferCoinFix:function(){var t=0;return this.market&&this.market.coinList&&this.market.coinList[this.transferCoin]&&(t=this.market.coinList[this.transferCoin].showPrecision),Number(t)},transferError:function(){var t=!1;return parseFloat(this.transferNum)>parseFloat(this.transferCanNum)&&(t=!0),t},transferCanNum:function(){var t=0;return t=1===this.transferSide?this.exchangeAvailable:this.otherAvailable,Number(t)},transferDisabled:function(){return!this.transferNum||!this.transferCoin||this.transferError},transferBalance:function(){if(this.transferCoin&&this.leverBalance){var t=this.market.coinList[this.transferCoin].showPrecision,e=this.leverBalance;return this.transferCoin===e.baseCoin?{exchangeAvailable:Object(i["f"])(e.baseExNormalBalance,t),otherAvailable:Object(i["f"])(e.baseCanTransfer,t)}:{exchangeAvailable:Object(i["f"])(e.quoteEXNormalBalance,t),otherAvailable:Object(i["f"])(e.quoteCanTransfer,t)}}return{exchangeAvailable:"--",otherAvailable:"--"}},exchangeAvailable:function(){return this.transferBalance.exchangeAvailable},otherAvailable:function(){return this.transferBalance.otherAvailable}},filters:{thousands:function(t){if(t){var e=t.toString(),s=e.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return e.replace(s,"$1,")}return t}},methods:{init:function(){var t=this;this.$bus.$on("openTransfer",(function(e,s,a){e&&(t.transferSymbol=e,t.symbolName=a),s&&(t.transferCoin=s),t.showTransfer=!0}))},getShowCoin:function(t){if(!this.market)return t;var e=this.market.coinList,s=t;return this.market&&e&&(s=Object(i["l"])(t,e)),s},showLoading:function(t){this.$emit("showLoading",t)},getLeverBalance:function(){var t=this;this.showLoading(!0),this.axios({url:"lever/finance/symbol/balance",params:{symbol:this.symbolName}}).then((function(e){t.showLoading(!1),"0"===e.code.toString()?t.leverBalance=e.data:t.$bus.$emit("tip",{text:e.msg,type:"error"})}))},setLeverData:function(){var t=this.market.coinList,e=[],s=this.leverMap;Object.keys(s).forEach((function(a){e.push({symbol:s[a].symbol,code:s[a].name,value:"".concat(Object(i["l"])(s[a].baseCoin,t),"/").concat(Object(i["l"])(s[a].quoteCoin,t))})})),this.symbolList=[].concat(e),this.transferSymbol||(this.transferSymbol=this.symbolList[0].code),this.symbolName||(this.symbolName=this.symbolList[0].symbol),this.showLoading(!1)},changeTransferSide:function(){this.transferNum="",1===this.transferSide?this.transferSide=2:this.transferSide=1},closeTransfer:function(){this.showTransfer=!1,this.transferNum="",this.transferSide=1},transferAll:function(){1===this.transferSide?this.transferNum=this.exchangeAvailable:this.transferNum=this.otherAvailable},confirmTransfer:function(){var t=this;this.showLoading(!0);var e={fromAccount:1===this.transferSide?"1":"2",toAccount:1===this.transferSide?"2":"1",amount:this.transferNum,coinSymbol:this.transferCoin,symbol:this.symbolName};this.axios({url:"lever/finance/transfer",params:e}).then((function(e){t.showLoading(!1),"0"===e.code.toString()?(t.clearTransfer(),t.showTransfer=!1,t.$emit("success"),t.$bus.$emit("tip",{text:e.msg,type:"success"})):t.$bus.$emit("tip",{text:e.msg,type:"error"})}))},clearTransfer:function(){this.transferSide=1,this.transferNum="",this.transferSymbol="",this.transferCoin="",this.symbolName=""},selectChange:function(t,e){this[e]=t.code,t.symbol&&(this.symbolName=t.symbol)},inputChange:function(t,e){this[e]=t}}},o=(s("ff39"),{mixins:[r],mounted:function(){this.init()}}),c=o,l=s("2877"),u=Object(l["a"])(c,a,n,!1,null,null,null);e["a"]=u.exports},ed09:function(t,e,s){},ff39:function(t,e,s){}}]);