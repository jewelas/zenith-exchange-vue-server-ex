(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e36cb6b0"],{"434d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"page-flowingWater"},[e("div",{staticClass:"flowingWater-nav a-3-bd"},[e("c-navTab",{attrs:{activeClassName:"b-1-cl",activeColor:"a-12-bg",className:"b-2-cl",currentTab:t.nowType,navTab:t.navTab,lineHeight:"55"},on:{currentType:t.currentType}})],1),e("div",{staticClass:"flowingWater-options"},[3===t.nowType?e("c-select",{attrs:{promptText:t.$t("assets.lerverageFlowingWater.direction"),value:t.otherType,options:t.otherTypeList,errorHave:!0,width:"150px"},on:{onChanges:t.otherTypeChange}}):t._e(),e("c-select",{attrs:{promptText:t.$t("assets.lerverageFlowingWater.symbol"),value:t.symbol,options:t.symbolList,errorHave:!0,width:"120px",filterable:!0},on:{onChanges:t.symbolChange}})],1),e("div",{staticClass:"flowingWater-table"},[e("c-table",{attrs:{imgMap:t.imgMap,colorMap:t.colorMap,cellHeight:55,loading:t.tabelLoading,columns:t.columns,dataList:t.tabelList,subContent:t.subContent,subColumns:t.subColumns,subContentId:t.subContentId,subLoading:t.subLoading},on:{elementClick:t.tableClick}}),t.paginationObj.total>t.paginationObj.display?e("c-pagination",{attrs:{total:t.paginationObj.total,display:t.paginationObj.display,currentPage:t.paginationObj.currentPage},on:{pagechange:t.pagechange}}):t._e()],1),e("leverageRepayment",{on:{success:t.repaymentSuccess}})],1)},i=[],n=(a("c5f6"),a("28a5"),a("456d"),a("ac6a"),a("6b54"),a("7f7f"),a("95d5")),r={name:"page-flowingWater",data:function(){return{imgMap:n["s"],colorMap:n["b"],tabelLoading:!0,nowType:1,symbol:"",tabelList:[],symbolList:[],otherType:"0",paginationObj:{total:0,display:10,currentPage:1},revokeList:[],subContent:[],subColumns:[],subContentId:0,subLoading:!1,dataList:{},messData:null}},computed:{otherTypeList:function(){return[{code:"0",value:this.$t("assets.lerverageFlowingWater.directionAll")},{code:"1",value:this.$t("assets.lerverageFlowingWater.directionIn")},{code:"2",value:this.$t("assets.lerverageFlowingWater.directionOut")}]},navTab:function(){var t=[{name:this.$t("assets.lerverageFlowingWater.tab1"),index:1},{name:this.$t("assets.lerverageFlowingWater.tab2"),index:2},{name:this.$t("assets.lerverageFlowingWater.tab3"),index:3}];return t},market:function(){return this.$store.state.baseData.market},columns:function(){var t=[];return 1===this.nowType&&(t=[{title:this.$t("assets.lerverageFlowingWater.tab1List1"),width:"10%"},{title:this.$t("assets.lerverageFlowingWater.tab1List2"),width:"10%"},{title:this.$t("assets.lerverageFlowingWater.tab1List3"),width:"10%"},{title:this.$t("assets.lerverageFlowingWater.tab1List4"),width:"15%"},{title:this.$t("assets.lerverageFlowingWater.tab1List5"),width:"10%"},{title:this.$t("assets.lerverageFlowingWater.tab1List6"),width:"15%"},{title:this.$t("assets.lerverageFlowingWater.tab1List7"),width:"15%"},{title:this.$t("assets.lerverageFlowingWater.tab1List8"),width:"15%"}]),2===this.nowType&&(t=[{title:this.$t("assets.lerverageFlowingWater.tab2List1"),width:"10%"},{title:this.$t("assets.lerverageFlowingWater.tab2List2"),width:"10%"},{title:this.$t("assets.lerverageFlowingWater.tab2List3"),width:"10%"},{title:this.$t("assets.lerverageFlowingWater.tab2List4"),width:"15%"},{title:this.$t("assets.lerverageFlowingWater.tab2List5"),width:"15%"},{title:this.$t("assets.lerverageFlowingWater.tab2List6"),width:"15%"},{title:this.$t("assets.lerverageFlowingWater.tab2List7"),width:"15%"},{title:this.$t("assets.lerverageFlowingWater.tab1List8"),width:"10%"}]),3===this.nowType&&(t=[{title:this.$t("assets.lerverageFlowingWater.tab3List1"),width:"10%"},{title:this.$t("assets.lerverageFlowingWater.tab3List2"),width:"20%"},{title:this.$t("assets.lerverageFlowingWater.tab3List3"),width:"20%"},{title:this.$t("assets.lerverageFlowingWater.tab3List4"),width:"30%"},{title:this.$t("assets.lerverageFlowingWater.tab3List5"),width:"20%"}]),t},axiosSymbol:function(){return"all"===this.symbol?null:this.symbol},newcoinOpen:function(){return this.$store.state.baseData.newcoinOpen}},watch:{market:function(t){t&&this.messData&&this.setData()},messData:function(t){t&&this.market&&this.setData()}},methods:{init:function(){this.getMess(),this.market&&this.messData&&this.setData()},getShowSymbol:function(t,e){if(!this.market)return t;var a=this.market.market,s=t;if(this.market&&a){var i=a[e][t];s=i.showName||i.name}return s},getShowCoin:function(t){if(!this.market)return t;var e=this.market.coinList,a=t;return this.market&&e&&(a=Object(n["l"])(t,e)),a},getMess:function(){var t=this;this.axios({url:"/lever/finance/balance"}).then((function(e){if("0"===e.code.toString()){var a=[];Object.keys(e.data.leverMap).forEach((function(t){var s=t.split("/");a[s[0]+s[1]]=e.data.leverMap[t]})),t.messData=a}}))},symbolChange:function(t){this.symbol=t.code,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData()},otherTypeChange:function(t){this.otherType=t.code,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData()},currentType:function(t){this.nowType=t.index,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData()},rateFixFn:function(t){return"".concat(Object(n["f"])(100*t,2),"%")},setData:function(){var t=this,e=[{code:"all",value:this.$t("assets.lerverageFlowingWater.allCoin")}],a=this.market.market;Object.keys(a).forEach((function(s){Object.keys(a[s]).forEach((function(i){var n=a[s][i];n.is_open_lever&&e.push({code:n.symbol,value:t.getShowSymbol(n.name,s)})}))})),this.symbolList=e,this.symbol="all",this.getData()},getData:function(){1===this.nowType?this.rechargeData():2===this.nowType?this.withdrawData():this.otherData()},repaymentSuccess:function(){this.getData()},pagechange:function(t){this.paginationObj.currentPage=t,this.getData()},tableClick:function(t,e){if("repayment"===t){var a=e.split("_")[1],s=this.dataList[a];this.$bus.$emit("coRepayment",s)}else"details"===t&&this.getSubTableData(e)},typeText:function(t){var e="";switch(t){case"1":e=this.$t("assets.leverageToLoan.typeText1");break;case"2":e=this.$t("assets.leverageToLoan.typeText2");break;default:e=this.$t("assets.leverageToLoan.typeText3")}return e},getSubTableData:function(t){var e=this;if(t.open){var a=t.id.split("_"),s=Number(a[1]);this.subContentId=t.id,this.subColumns=[this.$t("order.exchangeOrder.detailsTime"),this.$t("assets.leverageToLoan.list3"),this.$t("order.exchangeOrder.detailsVolume"),this.$t("assets.flowingWater.type")],this.subContent=[],this.subLoading=!0,this.axios({url:"/lever/return/info",method:"post",params:{id:s.toString(),pageSize:1e4}}).then((function(a){if(t.id===e.subContentId)if("0"===a.code.toString()){var s=[];a.data.financeList.forEach((function(t){var a=8;s.push({ctime:Object(n["k"])(Number(t.repaymentTime)),coin:e.getShowCoin(t.coin),volume:Object(n["f"])(t.returnMoney,a),type:e.typeText(t.type.toString())})})),e.subLoading=!1,e.subContent=s}else e.subLoading=!1,e.$bus.$emit("tip",{text:a.msg,type:"error"})}))}},rechargeData:function(){var t=this;this.axios({url:"lever/borrow/new",params:{pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,symbol:this.axiosSymbol}}).then((function(e){if(1===t.nowType&&"0"===e.code.toString()){var a=[];e.data.financeList.forEach((function(e){var s=t.market.coinList,i=s[e.coin]&&s[e.coin].showPrecision||0,r=t.messData[e.symbol]||{},o=r.baseReturnPrecision||8;e.coin===r.quoteCoin&&(o=r.quoteReturnPrecision||8),o=8,i=8,t.dataList[e.id]=e,a.push({id:"".concat(e.symbol,"_").concat(e.id),data:[Object(n["k"])(Number(e.ctime)),e.showName||e.symbol.toUpperCase(),t.getShowCoin(e.coin.toUpperCase()),Object(n["f"])(e.borrowMoney,i),t.rateFixFn(e.interestRate),Object(n["f"])(e.oweInterest,o),Object(n["f"])(e.oweAmount,o),[{type:"subTable",text:t.$t("order.exchangeOrder.details"),eventType:"details"},{type:"button",text:t.$t("assets.lerverageFlowingWater.repayment"),eventType:"repayment"}]]})})),t.tabelLoading=!1,t.tabelList=a,t.paginationObj.total=e.data.count}}))},getHisStatus:function(t){var e="";switch(t){case 1:e=this.$t("assets.lerverageFlowingWater.status1");break;case 2:e=this.$t("assets.lerverageFlowingWater.status2");break;case 3:e=this.$t("assets.lerverageFlowingWater.status3");break;case 4:e=this.$t("assets.lerverageFlowingWater.status4");break;case 5:e=this.$t("assets.lerverageFlowingWater.status5");break;case 6:e=this.$t("assets.lerverageFlowingWater.status6");break;case 7:e=this.$t("assets.lerverageFlowingWater.status7");break;default:e=""}return e},withdrawData:function(){var t=this;this.axios({url:"/lever/borrow/history",params:{pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,symbol:this.axiosSymbol}}).then((function(e){if(2===t.nowType&&"0"===e.code.toString()){var a=[];e.data.financeList.forEach((function(e){var s=t.market.coinList,i=s[e.coin]&&s[e.coin].showPrecision||0,r=t.messData[e.symbol]||{},o=r.baseReturnPrecision;e.coin===r.quoteCoin&&(o=r.quoteReturnPrecision||8),o=8,i=8,a.push({id:"".concat(e.symbol,"_").concat(e.id),data:[Object(n["k"])(Number(e.ctime)),e.showName||e.symbol.toUpperCase(),t.getShowCoin(e.coin.toUpperCase()),Object(n["f"])(e.borrowMoney,i),t.rateFixFn(e.interestRate),Object(n["f"])(e.interest,o),t.getHisStatus(e.status),[{type:"subTable",text:t.$t("order.exchangeOrder.details"),eventType:"details"}]]})})),t.tabelLoading=!1,t.tabelList=a,t.paginationObj.total=e.data.count}}))},otherData:function(){var t=this;this.axios({url:"lever/finance/transfer/list",params:{pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,symbol:this.axiosSymbol,transactionType:"0"===this.otherType?void 0:this.otherType}}).then((function(e){if(3===t.nowType&&"0"===e.code.toString()){var a=e.data,s=a.financeList,i=a.count,r=[];s.forEach((function(e,a){var s=t.market.coinList,i=s[e.coinSymbol]&&s[e.coinSymbol].showPrecision||0;i=8;var o=1===e.transferType?t.$t("assets.lerverageFlowingWater.directionIn"):t.$t("assets.lerverageFlowingWater.directionOut");r.push({id:a,data:[Object(n["k"])(e.createTime),e.showName||e.symbol,t.getShowCoin(e.coinSymbol),Object(n["f"])(e.amount,i),[{text:o,classes:1===e.transferType?"e-5-cl":"e-6-cl"}]]})})),t.tabelLoading=!1,t.tabelList=r,t.paginationObj.total=i}}))}}},o=(a("6693"),a("e00b")),l={mixins:[r],components:{leverageRepayment:o["a"]},mounted:function(){this.init()}},c=l,h=a("2877"),u=Object(h["a"])(c,s,i,!1,null,null,null);e["default"]=u.exports},6693:function(t,e,a){},e00b:function(t,e,a){"use strict";a("7f7f");var s=function(){var t=this,e=t._self._c;return e("c-dialog",{attrs:{showFlag:t.transferFlag,titleText:t.$t("assets.leverageRepayment.title"),confirmLoading:t.transferConfirmLoading,confirmDisabled:t.transferConfirmDisabled},on:{close:t.transferDialogClose,confirm:t.transferDialogConfirm}},[e("section",{staticClass:"repayment-box"},[e("ul",{staticClass:"repayment-list"},[e("li",{staticClass:"a-4-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.symbol")))]),e("span",{staticClass:"value b-1-cl"},[t._v(t._s(t.getShowSymbol(t.transferObj.name)))])]),e("li",{staticClass:"a-4-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.coin")))]),e("span",{staticClass:"value b-1-cl"},[t._v(t._s(t.getShowCoin(t.repaymentMess.coin)))])]),e("li",{staticClass:"a-4-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.Surplus")))]),e("span",{staticClass:"value b-1-cl"},[t._v("\n          "+t._s(t._f("fixDReturnFn")(t.repaymentMess.Surplus,this))+"\n           "+t._s(t.getShowCoin(t.repaymentMess.coin)))])]),e("li",{staticClass:"a-4-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.sum")))]),e("span",{staticClass:"value b-1-cl"},[t._v("\n          "+t._s(t._f("fixDFn")(t.repaymentMess.sum,this))+" "+t._s(t.getShowCoin(t.repaymentMess.coin))+"\n        ")])]),e("li",{staticClass:"a-4-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.rate")))]),e("span",{staticClass:"value b-1-cl"},[t._v("\n          "+t._s(t._f("fixDReturnFn")(t.repaymentMess.rate,this))+" "+t._s(t.getShowCoin(t.repaymentMess.coin))+"\n        ")])])]),e("c-inputLine",{attrs:{name:"transferValue",value:t.transferValue,promptText:t.$t("assets.leverageRepayment.RepaymentNum"),errorHave:!0,errorFlag:t.inputMess.showError,errorText:t.inputMess.text,warningText:t.transferWarningText},on:{onchanges:t.inputLineChange}},[e("c-button",{attrs:{type:"text",height:"30px"},on:{click:t.allTransfer}},[t._v("\n        "+t._s(t.$t("assets.otcAccount.all"))+"\n      ")])],1)],1)])},i=[],n=(a("6b54"),a("c5f6"),a("95d5")),r={data:function(){return{transferConfirmLoading:!1,transferFlag:!1,transferValue:"",transferCoin:"",transferObj:{},axiosFlag:!1,symbol:"",repaymentData:{}}},filters:{fixDFn:function(t){return Object(n["f"])(t,8)},fixDReturnFn:function(t){return Object(n["f"])(t,8)}},watch:{market:function(t){t&&this.axiosFlag&&this.getData()},transferValue:function(t){this.transferValue=Object(n["h"])(t,8)}},computed:{inputMess:function(){var t={flag:!1,showError:!1,text:""},e=Number(this.transferValue),a=Number(this.transferCanNum),s=Number(Object(n["f"])(this.repaymentMess.Surplus,this.returnFix)),i=Number(this.transferMinNum),r=!0;if(i>s&&(r=!1),0===e)t.flag=!1,t.text="",t.showError=!1;else if(i>e&&r){t.flag=!1,t.showError=!0;var o=this.$t("assets.leverageRepayment.error1");t.text="".concat(o," ").concat(Object(n["f"])(i,this.transferCoinFix)," ").concat(this.transferCoin)}else e>a?(t.flag=!1,t.showError=!0,t.text=this.$t("assets.leverageRepayment.error2")):e>s?(t.flag=!1,t.showError=!0,t.text=this.$t("assets.leverageRepayment.error3")):(t.flag=!0,t.text="",t.showError=!1);return t},repaymentMess:function(){var t={coin:"",sum:"",rete:"",Surplus:""},e=this.repaymentData,a=e.coin,s=e.borrowMoney,i=e.oweInterest,n=e.oweAmount;return t.coin=a,t.sum=s||0,t.rate=i||0,t.Surplus=(i||0)+(n||0),t},market:function(){return this.$store.state.baseData.market},transferWarningText:function(){var t=this.$t("assets.leverageRepayment.can"),e=Object(n["f"])(this.transferCanNum,8);return"".concat(t," ").concat(e," ").concat(this.getShowCoin(this.transferCoin)," ")},transferCoinFix:function(){var t=0;return this.market&&this.market.coinList&&this.market.coinList[this.transferCoin]&&(t=this.market.coinList[this.transferCoin].showPrecision),Number(t)},returnFix:function(){var t=this.transferObj.baseReturnPrecision||0;return this.repaymentMess.coin===this.transferObj.quoteCoin&&(t=this.transferObj.quoteReturnPrecision),t},transferConfirmDisabled:function(){if(this.transferConfirmLoading)return!1;var t=!0;return this.inputMess.flag&&(t=!1),t},transferCanNum:function(){var t=this.transferObj,e=t.baseNormalBalance,a=t.quoteNormalBalance,s=t.baseCoin,i=t.quoteCoin,n="";return this.transferCoin===s?n=e:this.transferCoin===i&&(n=a),Number(n)},transferMinNum:function(){var t=this.transferObj,e=t.baseMinPayment,a=t.quoteMinPayment,s=t.baseCoin,i=t.quoteCoin,n="";return this.transferCoin===s?n=e:this.transferCoin===i&&(n=a),Number(n)}},methods:{init:function(){var t=this;this.$bus.$on("coRepayment",(function(e){var a=e.symbol,s=e.coin;t.repaymentData=e,t.axiosFlag=!0,t.symbol=a,t.transferFlag=!0,t.transferCoin=s,t.market&&t.getData()}))},getShowSymbol:function(t){if(!this.market)return t;var e=this.market.market,a=t;if(this.market&&e&&this.transferObj.quoteCoin){var s=e[this.transferObj.quoteCoin][this.transferObj.name];a=s.showName||s.name}return a},getShowCoin:function(t){if(!this.market)return t;var e=this.market.coinList,a=t;return this.market&&e&&(a=Object(n["l"])(t,e)),a},getData:function(){var t=this;this.axiosFlag=!1;var e={symbol:this.symbol};this.axios({url:"/lever/finance/symbol/balance",params:e}).then((function(e){"0"===e.code.toString()&&(t.transferObj=e.data)}))},allTransfer:function(){var t=this.repaymentMess.Surplus,e="";e=Number(t)>Number(this.transferCanNum)?Number(this.transferCanNum):Number(t),this.transferValue=Object(n["f"])(e,this.returnFix)},inputLineChange:function(t,e){this[e]=t},clearTransfer:function(){this.transferFlag=!1,this.transferValue="",this.transferCoin="",this.transferConfirmLoading=!1,this.$set(this,"transferObj",{})},transferDialogClose:function(){this.clearTransfer()},transferDialogConfirm:function(){var t=this;this.transferConfirmLoading=!0;var e={id:this.repaymentData.id,amount:this.transferValue};this.axios({url:"/lever/finance/return",params:e}).then((function(e){t.transferConfirmLoading=!1,"0"===e.code.toString()?(t.clearTransfer(),t.$emit("success"),t.$bus.$emit("tip",{text:e.msg,type:"success"})):t.$bus.$emit("tip",{text:e.msg,type:"error"})}))}}},o=(a("ea4c"),{mixins:[r],mounted:function(){this.init()}}),l=o,c=a("2877"),h=Object(c["a"])(l,s,i,!1,null,null,null);e["a"]=h.exports},ea4c:function(t,e,a){}}]);