(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee392f3a"],{6285:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"page-otcOrder fuz-card"},[e("div",{staticClass:"otcOrder-nav fuz-card-tab"},[e("c-navTab",{attrs:{activeClassName:"b-1-cl",activeColor:"a-12-bg",className:"e-2-cl",currentTab:t.nowType,navTab:t.navTab,lineHeight:"55"},on:{currentType:t.currentType}}),2===t.nowType?e("div",{staticClass:"otcOrder-nav-switchs"},[e("c-switch",{attrs:{value:t.switchFlag},on:{click:t.switchChange}}),e("span",{staticClass:"text"},[t._v(t._s(t.$t("order.otcOrder.haveCancel")))])],1):t._e()],1),e("div",{staticClass:"otcOrder-options"},[e("c-select",{attrs:{promptText:t.$t("order.coOrder.type"),value:t.side,options:t.sideList,errorHave:!0,width:"120px"},on:{onChanges:t.sideChange}}),e("c-select",{attrs:{promptText:t.$t("order.coOrder.contract"),value:t.contract,options:t.contractList,errorHave:!0,filterable:!0,width:"330px"},on:{onChanges:t.contractChange}})],1),e("div",{staticClass:"otcOrder-table"},[e("c-table",{attrs:{imgMap:t.imgMap,colorMap:t.colorMap,loading:t.tabelLoading,columns:t.columns,dataList:t.tabelList,cellHeight:55},on:{elementClick:t.tableClick}}),t.paginationObj.total>t.paginationObj.display?e("c-pagination",{attrs:{total:t.paginationObj.total,display:t.paginationObj.display,currentPage:t.paginationObj.currentPage},on:{pagechange:t.pagechange}}):t._e()],1)])},a=[],o=i("fc7f"),s=(i("fb41"),{mixins:[o["a"]],mounted:function(){this.init()}}),c=s,n=i("2877"),d=Object(n["a"])(c,r,a,!1,null,null,null);e["default"]=d.exports},fb41:function(t,e,i){},fc7f:function(t,e,i){"use strict";i("6b54"),i("28a5"),i("456d"),i("ac6a");var r=i("95d5");e["a"]={name:"page-otcOrder",data:function(){return{imgMap:r["s"],colorMap:r["b"],switchFlag:!1,tabelLoading:!0,tabelList:[],nowType:1,contract:"",side:"all",contractList:[],paginationObj:{total:0,display:10,currentPage:1},revokeList:[]}},watch:{coPublicInfo:function(t){t&&this.initContractList()}},computed:{coPublicInfo:function(){return this.$store.state.baseData.coPublicInfo},navTab:function(){return[{name:this.$t("order.otcOrder.nowOrder"),index:1},{name:this.$t("order.otcOrder.hisOrder"),index:2}]},sideList:function(){return[{code:"all",value:this.$t("order.otcOrder.all")},{code:"BUY",value:this.$t("order.otcOrder.buy")},{code:"SELL",value:this.$t("order.otcOrder.sell")}]},axiosSide:function(){return"all"===this.side?"":this.side},columns:function(){var t=[];return 1===this.nowType&&(t=[{title:this.$t("order.coOrder.nowList1"),width:"10%"},{title:this.$t("order.coOrder.nowList2"),width:"10%",align:"left"},{title:this.$t("order.coOrder.nowList3"),width:"8%"},{title:this.$t("order.coOrder.nowList4"),width:"10%"},{title:this.$t("order.coOrder.nowList5"),width:"5%"},{title:this.$t("order.coOrder.nowList6"),width:"5%"},{title:this.$t("order.coOrder.nowList7"),width:"10%"},{title:this.$t("order.coOrder.nowList8"),width:"10%"},{title:this.$t("order.coOrder.nowList9"),width:"10%"},{title:this.$t("order.coOrder.nowList10"),width:"10%"},{title:this.$t("order.coOrder.nowList11"),width:"10%"}]),2===this.nowType&&(t=[{title:this.$t("order.coOrder.hisList1"),width:"100px"},{title:this.$t("order.coOrder.hisList2"),width:"10%",align:"left"},{title:this.$t("order.coOrder.hisList3"),width:"10%"},{title:this.$t("order.coOrder.hisList4")},{title:this.$t("order.coOrder.hisList5"),width:"10%"},{title:this.$t("order.coOrder.hisList6"),width:"15%"},{title:this.$t("order.coOrder.hisList7")},{title:this.$t("order.coOrder.hisList8")}]),t}},methods:{init:function(){this.coPublicInfo&&this.initContractList()},initContractList:function(){var t=this,e=this.coPublicInfo.market,i=[];Object.keys(e).forEach((function(r){e[r].forEach((function(e){var r=e.baseSymbol,a=e.quoteSymbol,o=e.contractType,s=e.settleTime,c=e.maxLeverageLevel,n="";if(o){var d=s.split(" ")[0].split("-");n=d[1]+d[2]}var h="".concat(t.getContractType(o)," · ").concat(n," (").concat(c,"X)"),l="".concat(r).concat(a," - ").concat(h);i.push({code:e.id,value:l})}))})),this.contractList=i,i.length&&(this.contract=i[0].code,this.getData())},switchChange:function(){this.switchFlag=!this.switchFlag,this.getData()},getData:function(){1===this.nowType?this.getNowData():2===this.nowType&&this.getHisData()},getStatus:function(t){var e="";switch(t){case 0:e=this.$t("order.coOrder.status1");break;case 1:e=this.$t("order.coOrder.status1");break;case 2:e=this.$t("order.coOrder.status2");break;case 3:e=this.$t("order.coOrder.status3");break;case 4:e=this.$t("order.coOrder.status4");break;case 5:e=this.$t("order.coOrder.status5");break;case 6:e=this.$t("order.coOrder.status6");break;case 7:e=this.$t("order.coOrder.status7");break;default:e=""}return e},getContractType:function(t){var e="";switch(t){case 0:e=this.$t("order.coOrder.orderType1");break;case 1:e=this.$t("order.coOrder.orderType2");break;case 2:e=this.$t("order.coOrder.orderType3");break;case 3:e=this.$t("order.coOrder.orderType4");break;case 4:e=this.$t("order.coOrder.orderType5");break;default:e=""}return e},getNowData:function(){var t=this;this.axios({url:"order_list_new",hostType:"co",method:"post",params:{side:this.axiosSide,pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,contractId:this.contract}}).then((function(e){if(1===t.nowType&&(t.tabelLoading=!1,"0"===e.code.toString())){var i=[],a=e.data,o=a.orderList,s=a.count;o.forEach((function(e){var a=t.getContractType(e.contractType),o="";if(e.contractType){var s=e.settleTime.split(" ")[0].split("-");o=s[1]+s[2]}i.push({id:JSON.stringify(e),data:[Object(r["k"])(e.ctimeStr),[{text:e.symbol,subContent:"".concat(a," · ").concat(o," (").concat(e.leverageLevel,"X)")}],[{type:"icon",iconSvg:'<span\n                      style="cursor: auto"\n                      class="'.concat("BUY"===e.side?"u-1-cl":"u-4-cl",'">\n                      ').concat("BUY"===e.side?"+":"-","\n                      ").concat(e.volume,"\n                    </span>")}],Object(r["f"])(e.price,e.pricePrecision),e.dealVolume,e.undealVolume,Object(r["f"])(e.orderPriceValue,e.pricePrecision),Object(r["f"])(e.avgPrice,e.pricePrecision),1===e.type?t.$t("order.coOrder.infoOrder"):t.$t("order.coOrder.marketOrder"),t.getStatus(e.status),[-1!==[0,1,3].indexOf(e.status)?{type:"button",text:t.$t("order.coOrder.cancel"),eventType:"cancelOrder"}:""]]})})),t.tabelList=i,t.paginationObj.total=s}}))},getHisData:function(){var t=this;this.axios({url:"order_list_history",hostType:"co",method:"post",params:{side:this.axiosSide,isShowCanceled:this.switchFlag?1:0,pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,contractId:this.contract}}).then((function(e){if(2===t.nowType&&(t.tabelLoading=!1,"0"===e.code.toString())){var i=[],a=e.data,o=a.orderList,s=a.count;o.forEach((function(e){var a=t.getContractType(e.contractType),o="";if(e.contractType){var s=e.settleTime.split(" ")[0].split("-");o=s[1]+s[2]}i.push({id:JSON.stringify(e),data:[Object(r["k"])(e.ctimeStr),[{text:e.symbol,subContent:"".concat(a," · ").concat(o," (").concat(e.leverageLevel,"X)")}],[{type:"icon",iconSvg:'<span\n                      style="cursor: auto"\n                      class="'.concat("BUY"===e.side?"u-1-cl":"u-4-cl",'">\n                      ').concat("BUY"===e.side?"+":"-","\n                      ").concat(e.volume,"\n                    </span>")}],Object(r["f"])(e.price,e.pricePrecision),e.dealVolume,Object(r["f"])(e.avgPrice,e.pricePrecision),1===e.type?t.$t("order.coOrder.infoOrder"):t.$t("order.coOrder.marketOrder"),t.getStatus(e.status)]})})),t.tabelList=i,t.paginationObj.total=s}}))},currentType:function(t){this.nowType!==t.index&&(this.nowType=t.index,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData())},sideChange:function(t){this.side!==t.code&&(this.side=t.code,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData())},contractChange:function(t){this.contract!==t.code&&(this.contract=t.code,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData())},tableClick:function(t,e){var i=this;if("cancelOrder"===t){var r=JSON.parse(e);this.revokeList.push(r.orderId),this.axios({url:"cancel_order",hostType:"co",method:"post",params:{orderId:r.orderId,contractId:r.contractId}}).then((function(t){var e=i.revokeList.indexOf(r.orderId);i.revokeList.splice(e,1),"0"===t.code.toString()?(i.$bus.$emit("tip",{text:i.$t("contract.cancel_success"),type:"success"}),i.getData()):i.$bus.$emit("tip",{text:t.msg,type:"error"})}))}},pagechange:function(t){this.paginationObj.currentPage=t,this.getData()}}}}}]);