(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a39cf6aa"],{"97c5":function(t,e,s){},a9e2:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"page-mnWithdraw"},[e("header",{staticClass:"mnWithdraw-header b-1-cl a-3-bd"},[t._v(t._s(t.$t("assets.withdraw.withdraw")))]),e("div",{staticClass:"mnWithdraw-details clearfix a-7-bd"},[e("div",{staticClass:"clearfix"},[e("div",{staticClass:"details-left"},[e("div",{staticClass:"symbol b-1-cl"},[t._v(t._s(t.showSymbol))]),e("div",{staticClass:"numberList clearfix"},[e("ul",{staticClass:"numberList-key"},[e("li",[t._v(t._s(t.$t("assets.withdraw.lumpSum")))]),e("li",[t._v(t._s(t.$t("assets.withdraw.Available")))]),e("li",[t._v(t._s(t.$t("assets.withdraw.freeze")))])]),e("ul",{staticClass:"numberList-value b-1-cl"},t._l(t.quotaList,(function(s,a){return e("li",{key:a},[t._v("\n            "+t._s(s.value)+"\n          ")])})),0)]),e("div",{staticClass:"details-warking b-7-cl"},[e("svg",{staticClass:"icon icon-16",staticStyle:{marginRight:"10px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-c_2"}})]),e("span",[t._v(t._s(t.$t("assets.withdraw.tip")))])])]),e("div",{staticClass:"details-right"},[e("div",{staticClass:"select-bank"},[e("c-newSelect",{attrs:{promptText:t.$t("assets.recharge.selectBank"),type:"doubleAndImg",value:t.bankId,options:t.bankList},on:{onChanges:t.bankChange}})],1),t.bankInfo?e("ul",{staticClass:"company-info"},[e("li",{staticClass:"company-name a-4-bg b-1-cl"},[t._v("\n          "+t._s(t.bankInfo.bankCardNumber)+"Â "+t._s(t.bankInfo.bankAccount)+"\n        ")])]):t._e(),e("c-inputLine",{attrs:{name:"amount",fixValue:t.showPrecision,inputType:"num",errorHave:!0,promptText:t.$t("assets.withdraw.NumberOfCoins"),value:t.amount,errorFlag:t.numberOptions.error,errorText:t.numberOptions.text},on:{onchanges:t.inputChange}},[e("c-button",{attrs:{type:"text",height:"30px"},on:{click:t.allWithDraw}},[t._v("\n          "+t._s(t.$t("assets.withdraw.allWithdraw"))+"\n        ")])],1),e("c-inputLine",{attrs:{name:"fee",errorHave:!0,promptText:t.feePrompt,value:t.fee,disabled:!0}}),e("c-button",{attrs:{width:"120px",marginTop:"32px",height:"40px",disabled:t.btnDisabled},on:{click:t.withdrawClick}},[t._v(t._s(t.$t("assets.withdraw.buttonWithdraw")))]),e("span",{staticClass:"goAddress b-4-cl",on:{click:t.goBindBankCard}},[t._v("\n        "+t._s(t.$t("assets.withdraw.bindBankCard"))+"\n      ")])],1)])]),e("header",{staticClass:"mnWithdraw-header b-1-cl a-3-bd"},[t._v("\n    "+t._s(t.$t("assets.withdraw.RecentWithdrawalRecords"))+"\n  ")]),e("div",{staticClass:"mnWithdraw-table"},[e("c-table",{attrs:{imgMap:t.imgMap,colorMap:t.colorMap,loading:t.tabelLoading,columns:t.columns,dataList:t.tabelList},on:{elementClick:t.tableClick}}),t.paginationObj.total>t.paginationObj.display?e("c-pagination",{attrs:{total:t.paginationObj.total,display:t.paginationObj.display,currentPage:t.paginationObj.currentPage},on:{pagechange:t.pagechange}}):t._e()],1),e("c-alert",{attrs:{showFlag:t.isShowBindCardTip,imgMap:t.imgMap,imageType:"1",buttonText:t.$t("assets.withdraw.goBind")},on:{close:function(e){t.isShowBindCardTip=!1},confirm:t.goBindBankCard}},[e("div",{staticClass:"b-1-cl bindCardTipTitle"},[t._v("\n      "+t._s(t.$t("assets.withdraw.withdrawTip"))+"\n    ")]),e("p",{staticClass:"b-2-cl bindCardTip"},[t._v("\n      "+t._s(t.$t("assets.withdraw.bindCardTip"))+"\n    ")])]),e("c-verifyCationc-alert",{attrs:{showFlag:t.alertFlag,imgMap:t.imgMap,titleText:t.$t("assets.withdraw.safetyWarning"),detaText:t.authTitleText,dataList:t.alertData,buttonText:t.$t("assets.withdraw.GotoOpen")},on:{close:t.alertClone,confirm:t.alertGo}}),e("c-dialog",{attrs:{showFlag:t.dialogFlag,paddingBottom:"14px",confirmLoading:t.dialogConfirmLoading,confirmDisabled:t.dialogConfirmDisabled,titleText:t.$t("assets.withdraw.safetyVerification")},on:{close:t.dialogClose,confirm:t.dialogConfirm}},[t.OpenMobile?e("c-inputLine",{attrs:{maxLength:"6",name:"smsCode",value:t.smsCode,promptText:t.$t("assets.withdraw.phoneCode"),errorHave:!0,errorFlag:t.phoneError,errorText:t.$t("assets.withdraw.phoneCodeError")},on:{onchanges:t.inputChange}},[e("c-getCode",{attrs:{name:"withdrawGetcode",voiceOpen:t.voiceSmsOpen},on:{click:t.getCodeClick}})],1):t._e(),t.OpenGoogle?e("c-inputLine",{attrs:{maxLength:"6",name:"googleCode",value:t.googleCode,promptText:t.$t("assets.withdraw.googleCode"),errorHave:!0,errorFlag:t.googleError,errorText:t.$t("assets.withdraw.googleCodeError")},on:{onchanges:t.inputChange}}):t._e()],1),e("c-alert",{attrs:{showFlag:t.notIdShowDialog,buttonText:t.$t("otcRelease.DeCertification"),imgMap:t.imgMap},on:{close:t.alertClone,confirm:t.gotoAuth}},[e("div",{staticClass:"ts-content-text"},[t._v("\n      "+t._s(t.$t("personal.exccAuthForm.text19"))+"\n    ")])]),e("c-popup",{attrs:{showFlag:t.isShowInfoDialog,titleText:t.infoDialogTitle,closeText:t.dialogCloseText,confirmText:t.dialogConfirmText,showCancel:!!t.dialogCloseText,paddingBottom:"24px",paddingTop:"0"},on:{close:t.closeInfoDialog,cancel:t.cancelOrder,confirm:t.closeInfoDialog}},[e("div",{staticClass:"order-status",class:t.orderStatusText.class},[t.orderStatusText.icon?e("img",{attrs:{src:t.orderStatusText.icon,alt:""}}):t._e(),t._v("\n      "+t._s(t.orderStatusText.title)+"\n    ")]),t.orderInfo?e("ul",{staticClass:"order-detail"},t._l(t.orderDetailRow,(function(s,a){return e("li",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"item.show"}],key:a,staticClass:"detail-item a-4-bg"},[e("span",{staticClass:"detail-key b-2-cl"},[t._v(t._s(s.title))]),e("span",{staticClass:"detail-value b-1-cl"},["ctime"===s.key?e("span",{staticClass:"text"},[t._v(t._s(t._f("formatTime")(t.orderInfo.ctime)))]):e("input",{ref:s.key,refInFor:!0,staticClass:"text b-1-cl",attrs:{type:"text",readonly:""},domProps:{value:t.orderInfo[s.key]}}),s.hasSymbol?e("span",[t._v(t._s(t.orderInfo.symbolName))]):t._e(),s.copy?e("i",{staticClass:"copy",on:{click:function(e){return t.copy(s.key)}}},[e("svg",{staticClass:"icon icon-14 hoverHide",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-a_9"}})]),e("svg",{staticClass:"icon icon-14 hoverShow",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-a_9_1"}})])]):t._e()])])})),0):t._e(),0===t.orderStatus?e("div",{staticClass:"refuseReason-tip b-7-cl"},[t._v("\n      "+t._s(t.$t("assets.withdraw.orderTip"))+"\n    ")]):t._e(),t.orderInfo&&t.orderInfo.checkDesc?e("div",{staticClass:"refuseReason-tip b-7-cl"},[t._v("\n      "+t._s(t.orderInfo.checkDesc)+"\n    ")]):t._e()])],1)},i=[],o=(s("ac6a"),s("28a5"),s("768b")),n=(s("6b54"),s("c5f6"),s("95d5")),r={name:"page-mnWithdraw",data:function(){return{tabelLoading:!0,imgMap:n["s"],colorMap:n["b"],alertFlag:!1,withdrawMin:"--",withdrawMax:"--",tabelList:[],withdrawList:[],symbol:"",amount:"",fee:"",paginationObj:{total:0,display:10,currentPage:1},dialogFlag:!1,dialogConfirmLoading:!1,googleCode:"",smsCode:"",revokeList:[],defaultFeeFlag:!0,defaultFee:null,symbol_withdraw_msg:null,branchTip:"",notIdShowDialog:!1,smsType:"sms",bankId:"",bankInfo:null,bankList:[],isShowBindCardTip:!1,feeRate:0,orderInfo:null,orderStatus:0,isShowInfoDialog:!1}},filters:{formatTime:function(t){return t?Object(n["k"])(t):t},fixDFn:function(t,e){return Object(n["f"])(t,e.showPrecision)}},computed:{userInfo:function(){return this.$store.state.baseData.userInfo},quotaList:function(){if(this.exchangeData&&this.exchangeData.allCoinMap[this.symbol]){var t=this.exchangeData.allCoinMap[this.symbol],e=Number(t.normal_balance)||Number(t.overcharge_balance);return[{key:"sum",value:Object(n["f"])(t.total_balance,this.showPrecision)},{key:"normal",value:Object(n["f"])(e,this.showPrecision)},{key:"lock",value:Object(n["f"])(t.lock_balance,this.showPrecision)}]}return[{key:"sum",value:"--"},{key:"normal",value:"--"},{key:"lock",value:"--"}]},showSymbol:function(){var t=this.symbol;return this.market&&this.market.coinList&&this.market.coinList[this.symbol]&&(t=Object(n["l"])(this.symbol,this.market.coinList)),t},enforceGoogleAuth:function(){return this.$store.state.baseData.is_enforce_google_auth||0},authTitleText:function(){var t=this.enforceGoogleAuth?"assets.withdraw.enforceGoogleAuth":"assets.withdraw.safetyWarningError";return this.$t(t)},alertData:function(){var t=[{text:this.$t("assets.withdraw.bindGoogle"),flag:this.OpenGoogle}];return this.enforceGoogleAuth||t.push({text:this.$t("assets.withdraw.bindPhone"),flag:this.OpenMobile}),t},showPrecision:function(){var t=0,e=this.$store.state.baseData.market;return e&&e.coinList&&e.coinList[this.symbol]&&(t=e.coinList[this.symbol].showPrecision),t},exchangeData:function(){return this.$store.state.assets.exchangeData},market:function(){return this.$store.state.baseData.market},btnDisabled:function(){var t=!0;return this.bankId&&Number(this.amount)&&this.numberOptions.flag&&(t=!1),t},columns:function(){return[{title:this.$t("assets.withdraw.withdrawTime"),width:"15%"},{title:this.$t("assets.withdraw.withdrawVolume"),width:"10%"},{title:this.$t("assets.withdraw.withdrawFee"),width:"10%"},{title:this.$t("assets.flowingWater.withdrawRemarks"),width:"15%"},{title:this.$t("assets.withdraw.withdrawStatus"),width:"10%"},{title:this.$t("assets.withdraw.withdrawOptions"),width:"15%"}]},OpenMobile:function(){var t=!1,e=this.userInfo;return e&&"1"===e.isOpenMobileCheck.toString()&&(t=!0),t},idAuth:function(){var t=this.userInfo,e=0;return t&&(e=Number(t.authLevel)),e},OpenGoogle:function(){var t=!1,e=this.userInfo;return e&&"1"===e.googleStatus.toString()&&(t=!0),t},phoneValueFlag:function(){return this.$store.state.regExp.verification.test(this.smsCode)},googleValueFlag:function(){return this.$store.state.regExp.verification.test(this.googleCode)},phoneError:function(){return 0!==this.smsCode.length&&!this.phoneValueFlag},googleError:function(){return 0!==this.googleCode.length&&!this.googleValueFlag},dialogConfirmDisabled:function(){var t=!0,e=!0;return this.OpenMobile&&(t=this.phoneValueFlag),this.OpenGoogle&&(e=this.googleValueFlag),!(t&&e||this.dialogConfirmLoading)},that:function(){return this},numberOptions:function(){var t={text:"",flag:null,error:null},e=parseFloat(this.quotaList[1].value)||0,s=parseFloat(this.withdrawMin)||0,a=parseFloat(this.withdrawMax)||0;return 0===this.amount.length||0===parseFloat(this.amount)?(t.text=this.$t("assets.withdraw.NumberOfCoinsError"),t.flag=!1,t.error=!1,t):parseFloat(this.amount)<=parseFloat(this.fee)?(t.text=this.$t("assets.withdraw.NumberOfCoinsError2"),t.flag=!1,t.error=!0,t):parseFloat(this.amount)>e?(t.text=this.$t("assets.withdraw.NumberOfCoinsError3"),t.flag=!1,t.error=!0,t):parseFloat(s)>this.amount||parseFloat(a)<this.amount?(t.text=this.$t("assets.withdraw.withdrawError1"),t.flag=!1,t.error=!0,t):(t.flag=!0,t.error=!1,t)},publicInfo:function(){return this.$store.state.baseData.publicInfo},withdrawKycOpen:function(){var t=0;return this.publicInfo&&this.publicInfo.kycLimitConfig&&(t=this.publicInfo.kycLimitConfig.withdraw_kyc_open),Number(t)},voiceSmsOpen:function(){return this.$store.state.baseData.voiceSmsOpen},feePrompt:function(){return"".concat(this.$t("assets.withdraw.fee"),"(rate: ").concat(this.feeRate,"%)")},infoDialogTitle:function(){return this.$t("assets.recharge.orderDetai")},isShowFeeInDetail:function(){return this.orderInfo&&this.orderInfo.fee>0},orderStatusText:function(){return 0===this.orderStatus?{class:"b-7-cl",title:this.$t("assets.recharge.orderStatus2"),icon:"http://dev-saas-oss.oss-cn-hongkong.aliyuncs.com/upload/20211213101026485.svg"}:2===this.orderStatus?{class:"b-5-cl",title:this.$t("assets.recharge.orderStatus3"),icon:"http://dev-saas-oss.oss-cn-hongkong.aliyuncs.com/upload/20211213101012958.svg"}:3===this.orderStatus?{class:"b-6-cl",title:this.$t("assets.recharge.orderStatus4"),icon:"http://dev-saas-oss.oss-cn-hongkong.aliyuncs.com/upload/20211213100958533.svg"}:4===this.orderStatus?{class:"b-2-cl",title:this.$t("assets.recharge.orderStatus5"),icon:"http://dev-saas-oss.oss-cn-hongkong.aliyuncs.com/upload/20211213100930964.svg"}:{class:"",title:""}},orderDetailRow:function(){var t=[{title:this.$t("assets.withdraw.NumberOfCoins"),key:"amount",copy:!1,show:!0,hasSymbol:!0},{title:this.$t("assets.withdraw.fee"),key:"fee",copy:!1,show:this.isShowFeeInDetail,hasSymbol:!0},{title:this.$t("assets.recharge.settledAmount"),key:"settledAmount",copy:!1,show:this.isShowFeeInDetail,hasSymbol:!0},{title:this.$t("assets.recharge.orderId"),key:"sequence",copy:!0,show:!0},{title:this.$t("assets.recharge.payee"),key:"bankAccount",copy:!1,show:!0},{title:this.$t("assets.recharge.bankAccountNum"),key:"bankCardNumber",copy:!1,show:!0},{title:this.$t("assets.recharge.bankName"),key:"bankNameShow",copy:!1,show:!0},{title:this.$t("assets.recharge.date"),key:"ctime",copy:!1,show:!0}];return t},dialogConfirmText:function(){return this.$t("common.close")},dialogCloseText:function(){return""},userInfoIsReady:function(){return this.$store.state.baseData.userInfoIsReady}},watch:{userInfo:function(t){t&&(this.isShowBindCardTip=!t.hasFiatBank)},userInfoIsReady:function(t){t&&this.canAlert()}},methods:{init:function(){this.$route.query.symbol?(this.exchangeData||this.$store.dispatch("assetsExchangeData"),this.userInfo&&(this.isShowBindCardTip=!this.userInfo.hasFiatBank),this.symbol=this.$route.query.symbol.toUpperCase(),this.getBankList(),this.getFeeRate(),this.getCost(),this.getTableList(),this.userInfoIsReady&&this.canAlert()):this.$router.push("/assets/exchangeAccount")},getBankList:function(){var t=this;this.axios({url:"/fiat/fiat_user_bank_list",params:{}}).then((function(e){var s=e.code,a=e.data,i=e.msg;if("0"===s.toString())if(a.list&&a.list.length){var n=a.list.map((function(t){var e=t;return e.code=t.id,e.value=t.bankNameShow,e.label="".concat(t.bankCardNumber," ").concat(t.bankAccount),e}));t.bankList=n.filter((function(t){return 0!==t.status}));var r=Object(o["a"])(t.bankList,1);t.bankInfo=r[0],t.bankId=t.bankInfo.id}else t.isShowBindCardTip=!0;else t.$bus.$emit("tip",{text:i,type:"error"})}))},bankChange:function(t){this.bankId=t.id,this.bankInfo=t},goBindBankCard:function(){this.$router.push("/personal/bindBankCard?type=add")},getFeeRate:function(){var t=this;this.axios({url:"fiat/fiat_symbol_info",params:{fiatSymbol:this.symbol}}).then((function(e){var s=e.code,a=e.data,i=e.msg;"0"===s.toString()?a.list&&a.list.length&&(t.feeRate=a.list[0].withdrawFeeRate):t.$bus.$emit("tip",{text:i,type:"error"})}))},inputChange:function(t,e){if("amount"===e){this[e]=Object(n["h"])(t,this.showPrecision);var s="".concat(t*this.feeRate/100);s.indexOf(".")>-1&&(s="".concat(s.split(".")[0],".").concat(s.split(".")[1].slice(0,2))),this.fee=s}else this[e]=t},getCost:function(){var t=this;this.axios({url:"cost/Getcost",params:{symbol:this.symbol}}).then((function(e){if("0"===e.code.toString()){var s=t.showPrecision;t.withdrawMin=Object(n["f"])(e.data.withdraw_min,s),t.withdrawMax=Object(n["f"])(e.data.withdraw_max,s)}}))},allWithDraw:function(){"--"!==this.quotaList[1].value&&(this.amount=this.quotaList[1].value)},canAlert:function(){var t=this;this.OpenGoogle||!this.enforceGoogleAuth&&this.OpenMobile?this.alertFlag=!1:setTimeout((function(){t.alertFlag=!0}),100)},alertClone:function(){this.alertFlag=!1,this.notIdShowDialog=!1},alertGo:function(){this.$router.push("/personal/userManagement")},pagechange:function(t){this.paginationObj.currentPage=t,this.getTableList()},getCodeClick:function(t,e){this.sendSmsCode(t,e)},sendSmsCode:function(t,e){var s=this;this.axios({url:"v4/common/smsValidCode",params:{operationType:"10",smsType:e&&"voiceSms"===e?"1":"0"}}).then((function(t){if("0"!==t.code.toString())setTimeout((function(){s.$bus.$emit("getCode-clear","withdrawGetcode"),s.$bus.$emit("tip",{text:t.msg,type:"error"})}),2e3);else{var a=e&&"voiceSms"===e?s.$t("login.voiceSendSuccess"):s.$t("login.phoneSendSuccess");s.$bus.$emit("tip",{text:a,type:"success"}),s.smsType="sms"===e?"sms":"voiceSms"}}))},withdrawClick:function(){if(this.OpenGoogle||!this.enforceGoogleAuth&&this.OpenMobile)return this.withdrawKycOpen&&1!==this.idAuth?void(this.notIdShowDialog=!0):void(this.dialogFlag=!0);this.alertFlag=!0},dialogClose:function(){this.smsCode="",this.googleCode="",this.dialogFlag=!1},dialogConfirm:function(){var t=this;this.dialogConfirmLoading=!0,this.axios({url:"fiat/do_withdraw",params:{symbol:this.symbol,amount:this.amount,fee:this.fee,bankName:this.bankInfo.bankName,bankCardNumber:this.bankInfo.bankCardNumber,bankAccount:this.bankInfo.bankAccount,userCardId:this.bankInfo.id,googleCode:this.googleCode?this.googleCode:void 0,smsValidCode:"sms"===this.smsType&&this.smsCode?this.smsCode:void 0,voiceSmsCode:"voiceSms"===this.smsType&&this.smsCode?this.smsCode:void 0}}).then((function(e){var s=e.code,a=e.data,i=e.msg;t.dialogConfirmLoading=!1,"0"===s.toString()?(t.dialogFlag=!1,t.resetParams(),t.orderInfo=a,t.orderStatus=a.status,t.getTableList(),t.$store.dispatch("assetsExchangeData"),t.isShowInfoDialog=!0):t.$bus.$emit("tip",{text:i,type:"error"})}))},resetParams:function(){this.amount="",this.fee="",this.smsCode="",this.googleCode=""},closeInfoDialog:function(){this.isShowInfoDialog=!1},cancelOrder:function(){var t=this;0===this.orderStatus?this.axios({url:"fiat/cancel_withdraw",params:{id:this.orderInfo.id}}).then((function(e){var s=e.code,a=e.msg;"0"===s.toString()?(t.$bus.$emit("tip",{text:a,type:"success"}),t.$store.dispatch("assetsExchangeData"),t.isShowInfoDialog=!1,t.getTableList()):t.$bus.$emit("tip",{text:a,type:"error"})})):this.isShowInfoDialog=!1},copy:function(t){var e=this.$refs[t],s=null;if(e.length){var a=Object(o["a"])(e,1);s=a[0]}else s=e;s.select(),document.execCommand("copy"),this.$bus.$emit("tip",{text:this.$t("personal.prompt.copySucces"),type:"success"})},fixStatus:function(t){return 0===t?this.$t("assets.recharge.orderStatus2"):2===t?this.$t("assets.recharge.orderStatus3"):3===t?this.$t("assets.recharge.orderStatus4"):4===t?this.$t("assets.recharge.orderStatus5"):""},getTableList:function(){var t=this;this.tabelLoading=!0,this.axios({url:"fiat/withdraw_list",params:{pageSize:this.paginationObj.display,page:this.paginationObj.currentPage}}).then((function(e){var s=e.code,a=e.data;if(t.tabelLoading=!1,"0"===s.toString()){var i=[];t.withdrawList=a.list,a.list.forEach((function(e,s){i.push({id:s,data:[Object(n["k"])(e.ctime),"".concat(Object(n["f"])(e.amount,t.showPrecision)," ").concat(e.symbolName),"".concat(Object(n["f"])(e.fee,t.showPrecision)," ").concat(e.symbolName),e.checkDesc,t.fixStatus(e.status),[{text:t.$t("assets.recharge.detail"),type:"button",eventType:"detail"}]]})})),t.tabelList=i,t.paginationObj.total=a.query.count}}))},tableClick:function(t,e){this.orderInfo=this.withdrawList[e],this.orderStatus=this.orderInfo.status,this.isShowInfoDialog=!0},handleButton:function(t){var e=[];return 0===t.status&&e.push({type:"button",text:this.$t("assets.flowingWater.Cancel"),iconClass:[""],eventType:"revoke"}),e.push({type:"subTable",text:this.$t("trade.view"),eventType:"subView"}),e},gotoAuth:function(){this.$router.push("/personal/userManagement")}}},l=(s("97c5"),{mixins:[r],mounted:function(){this.init()}}),h=l,c=s("2877"),u=Object(c["a"])(h,a,i,!1,null,null,null);e["default"]=u.exports}}]);