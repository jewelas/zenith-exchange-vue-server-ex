(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cf16fb2"],{1668:function(t,e,a){"use strict";a("7f7f");var s=function(){var t=this,e=t._self._c;return e("c-v5-dialog",{attrs:{showFlag:t.transferFlag,paddingBottom:"32px",titleText:t.$t("assets.leverageRepayment.title"),confirmLoading:t.transferConfirmLoading,confirmDisabled:t.transferConfirmDisabled},on:{close:t.transferDialogClose,confirm:t.transferDialogConfirm}},[e("section",{staticClass:"v5-repayment-box"},[e("ul",{staticClass:"repayment-list"},[e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.symbol")))]),e("span",{staticClass:"value v5-5-cl"},[t._v(t._s(t.getShowSymbol(t.transferObj.name)))])]),e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.coin")))]),e("span",{staticClass:"value v5-5-cl"},[t._v(t._s(t.getShowCoin(t.repaymentMess.coin)))])]),e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.Surplus")))]),e("span",{staticClass:"value v5-5-cl"},[t._v("\n          "+t._s(t._f("fixDReturnFn")(t.repaymentMess.Surplus,this))+"\n           "+t._s(t.getShowCoin(t.repaymentMess.coin)))])]),e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.sum")))]),e("span",{staticClass:"value v5-5-cl"},[t._v("\n          "+t._s(t._f("fixDFn")(t.repaymentMess.sum,this))+" "+t._s(t.getShowCoin(t.repaymentMess.coin))+"\n        ")])]),e("li",{staticClass:"v5-9-bg"},[e("span",{staticClass:"key"},[t._v(t._s(t.$t("assets.leverageRepayment.rate")))]),e("span",{staticClass:"value v5-5-cl"},[t._v("\n          "+t._s(t._f("fixDReturnFn")(t.repaymentMess.rate,this))+" "+t._s(t.getShowCoin(t.repaymentMess.coin))+"\n        ")])])]),e("div",{staticClass:"repayment-num"},[e("c-v5-input",{attrs:{name:"transferValue",width:"378px",value:t.transferValue,promptText:t.$t("assets.leverageRepayment.RepaymentNum"),prompClass:"v5-6-cl",errorHave:!0,errorFlag:t.inputMess.showError,errorText:t.inputMess.text,warningText:t.transferWarningText},on:{onChanges:t.inputLineChange}},[e("c-v5-button",{attrs:{slot:"append",type:"text"},on:{click:t.allTransfer},slot:"append"},[t._v("\n          "+t._s(t.$t("assets.otcAccount.all"))+"\n        ")])],1)],1)])])},i=[],n=(a("6b54"),a("c5f6"),a("95d5")),r={data:function(){return{transferConfirmLoading:!1,transferFlag:!1,transferValue:"",transferCoin:"",transferObj:{},axiosFlag:!1,symbol:"",repaymentData:{}}},filters:{fixDFn:function(t){return Object(n["f"])(t,8)},fixDReturnFn:function(t){return Object(n["f"])(t,8)}},watch:{market:function(t){t&&this.axiosFlag&&this.getData()},transferValue:function(t){this.transferValue=Object(n["h"])(t,8)}},computed:{inputMess:function(){var t={flag:!1,showError:!1,text:""},e=Number(this.transferValue),a=Number(this.transferCanNum),s=Number(Object(n["f"])(this.repaymentMess.Surplus,this.returnFix)),i=Number(this.transferMinNum),r=!0;if(i>s&&(r=!1),0===e)t.flag=!1,t.text="",t.showError=!1;else if(i>e&&r){t.flag=!1,t.showError=!0;var o=this.$t("assets.leverageRepayment.error1");t.text="".concat(o," ").concat(Object(n["f"])(i,this.transferCoinFix)," ").concat(this.transferCoin)}else e>a?(t.flag=!1,t.showError=!0,t.text=this.$t("assets.leverageRepayment.error2")):e>s?(t.flag=!1,t.showError=!0,t.text=this.$t("assets.leverageRepayment.error3")):(t.flag=!0,t.text="",t.showError=!1);return t},repaymentMess:function(){var t={coin:"",sum:"",rete:"",Surplus:""},e=this.repaymentData,a=e.coin,s=e.borrowMoney,i=e.oweInterest,n=e.oweAmount;return t.coin=a,t.sum=s||0,t.rate=i||0,t.Surplus=(i||0)+(n||0),t},market:function(){return this.$store.state.baseData.market},transferWarningText:function(){var t=this.$t("assets.leverageRepayment.can"),e=Object(n["f"])(this.transferCanNum,8);return"".concat(t," ").concat(e," ").concat(this.getShowCoin(this.transferCoin)," ")},transferCoinFix:function(){var t=0;return this.market&&this.market.coinList&&this.market.coinList[this.transferCoin]&&(t=this.market.coinList[this.transferCoin].showPrecision),Number(t)},returnFix:function(){var t=this.transferObj.baseReturnPrecision||0;return this.repaymentMess.coin===this.transferObj.quoteCoin&&(t=this.transferObj.quoteReturnPrecision),t},transferConfirmDisabled:function(){if(this.transferConfirmLoading)return!1;var t=!0;return this.inputMess.flag&&(t=!1),t},transferCanNum:function(){var t=this.transferObj,e=t.baseNormalBalance,a=t.quoteNormalBalance,s=t.baseCoin,i=t.quoteCoin,n="";return this.transferCoin===s?n=e:this.transferCoin===i&&(n=a),Number(n)},transferMinNum:function(){var t=this.transferObj,e=t.baseMinPayment,a=t.quoteMinPayment,s=t.baseCoin,i=t.quoteCoin,n="";return this.transferCoin===s?n=e:this.transferCoin===i&&(n=a),Number(n)}},methods:{init:function(){var t=this;this.$bus.$on("openRepayment",(function(e){var a=e.symbol,s=e.coin;t.repaymentData=e,t.axiosFlag=!0,t.symbol=a,t.transferFlag=!0,t.transferCoin=s,t.market&&t.getData()}))},getShowSymbol:function(t){if(!this.market)return t;var e=this.market.market,a=t;if(this.market&&e&&this.transferObj.quoteCoin){var s=e[this.transferObj.quoteCoin][this.transferObj.name];a=s.showName||s.name}return a},getShowCoin:function(t){if(!this.market)return t;var e=this.market.coinList,a=t;return this.market&&e&&(a=Object(n["l"])(t,e)),a},getData:function(){var t=this;this.axiosFlag=!1;var e={symbol:this.symbol};this.axios({url:"lever/finance/symbol/balance",params:e}).then((function(e){"0"===e.code.toString()&&(t.transferObj=e.data)}))},allTransfer:function(){var t=this.repaymentMess.Surplus,e="";e=Number(t)>Number(this.transferCanNum)?Number(this.transferCanNum):Number(t),this.transferValue=Object(n["f"])(e,this.returnFix)},inputLineChange:function(t,e){this[e]=t},clearTransfer:function(){this.transferFlag=!1,this.transferValue="",this.transferCoin="",this.transferConfirmLoading=!1,this.$set(this,"transferObj",{})},transferDialogClose:function(){this.clearTransfer()},transferDialogConfirm:function(){var t=this;this.transferConfirmLoading=!0;var e={id:this.repaymentData.id,amount:this.transferValue};this.axios({url:"lever/finance/return",params:e}).then((function(e){t.transferConfirmLoading=!1,"0"===e.code.toString()?(t.clearTransfer(),t.$emit("success"),t.$bus.$emit("tip",{text:e.msg,type:"success"})):t.$bus.$emit("tip",{text:e.msg,type:"error"})}))}}},o=(a("ed09"),{mixins:[r],mounted:function(){this.init()}}),l=o,c=a("2877"),u=Object(c["a"])(l,s,i,!1,null,null,null);e["a"]=u.exports},8728:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"v5-page-leverFlowingWater v5-10-bg"},[e("header",{staticClass:"flowingWater-header v5-5-cl"},[e("svg",{staticClass:"icon icon-20 icon-back",attrs:{"aria-hidden":"true"},on:{click:t.goBack}},[e("use",{attrs:{"xlink:href":"#icon-v5_36"}})]),e("span",[t._v(t._s(t.$t("assets.index.flowingWater")))]),e("div",{staticClass:"selectParam"},[3===t.nowType?e("c-v5-select",{staticClass:"type-select flowWater-select",attrs:{value:t.otherType,options:t.otherTypeList,errorHave:!0,width:"160px",inputHeight:"32px"},on:{onChanges:t.otherTypeChange}}):t._e(),e("c-v5-select",{staticClass:"flowWater-select",attrs:{value:t.symbol,options:t.symbolList,errorHave:!0,width:"160px",inputHeight:"32px",filterable:!0},on:{onChanges:t.symbolChange}})],1)]),e("div",{staticClass:"flowingWater-nav v5-12-bd"},[e("c-v5-navTab",{attrs:{activeClassName:"v5-5-cl",activeColor:"v5-1-bg",className:"v5-6-cl",currentTab:t.nowType,navTab:t.navTab},on:{currentType:t.currentType}})],1),e("div",{staticClass:"flowingWater-table"},[e("c-v5-table",{attrs:{imgMap:t.imgMap,colorMap:t.colorMap,loading:t.tabelLoading,columns:t.columns,dataList:t.tabelList,subFlag:!0,subContent:t.subContent,subColumns:t.subColumns,subContentId:t.subContentId},scopedSlots:t._u([{key:"coin",fn:function(a){return t.coinList&&t.coinList[a.row.coin]?e("dl",{staticClass:"table-coin"},[e("dt",[e("img",{attrs:{src:t.coinList[a.row.coin].icon,alt:""}})]),e("dd",[e("div",{staticClass:"coinShowName v5-5-cl"},[t._v(t._s(t._f("getCoinShowName")(a.row.coin,t.coinList)))]),e("div",{staticClass:"coinLongName v5-6-cl"},[t._v("\n              "+t._s(t.coinList[a.row.coin].longName||a.row.coin)+"\n            ")])])]):t._e()}},{key:"side",fn:function(a){return e("div",{},[e("span",{class:a.row.side.class},[t._v(t._s(a.row.side.text))])])}},{key:"operation",fn:function(a){return e("div",{staticClass:"operation"},t._l(a.row.operation,(function(s,i){return e("c-v5-button",{key:i,staticClass:"operation-btn",attrs:{type:"text",paddingW:"0",disabled:s.disabled},on:{click:function(e){return t.tableClick(s.type,a.row.id)}}},[t._v("\n            "+t._s(s.text)+"\n          ")])})),1)}}],null,!0)}),t.paginationObj.total>t.paginationObj.display?e("c-v5-pagination",{attrs:{total:t.paginationObj.total,display:t.paginationObj.display,currentPage:t.paginationObj.currentPage},on:{pagechange:t.pagechange}}):t._e()],1),e("leverageRepayment",{on:{success:t.repaymentSuccess}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"assets-loading"},[e("c-loading",{attrs:{size:"50"}})],1)],1)},i=[],n=(a("a481"),a("c5f6"),a("28a5"),a("456d"),a("ac6a"),a("6b54"),a("7f7f"),a("95d5")),r={name:"page-flowingWater",data:function(){return{imgMap:n["s"],colorMap:n["b"],tabelLoading:!0,nowType:1,symbol:"",tabelList:[],symbolList:[],otherType:"0",paginationObj:{total:0,display:10,currentPage:1},revokeList:[],subContent:[],subContentId:null,subLoading:!1,dataList:{},messData:null,loading:!1}},computed:{otherTypeList:function(){return[{code:"0",value:this.$t("assets.lerverageFlowingWater.directionAll")},{code:"1",value:this.$t("assets.lerverageFlowingWater.directionIn")},{code:"2",value:this.$t("assets.lerverageFlowingWater.directionOut")}]},navTab:function(){var t=[{name:this.$t("assets.lerverageFlowingWater.tab1"),index:1},{name:this.$t("assets.lerverageFlowingWater.tab2"),index:2},{name:this.$t("assets.lerverageFlowingWater.tab3"),index:3}];return t},market:function(){return this.$store.state.baseData.market},coinList:function(){return this.market&&this.market.coinList},columns:function(){var t=[];return 1===this.nowType&&(t=[{key:"coin",title:this.$t("assets.lerverageFlowingWater.tab1List3"),width:"15%"},{key:"account",title:this.$t("assets.lerverageFlowingWater.tab1List2"),width:"10%"},{key:"time",title:this.$t("assets.lerverageFlowingWater.tab1List1"),width:"10%"},{key:"amount",title:this.$t("assets.lerverageFlowingWater.tab1List4"),width:"15%"},{key:"rate",title:this.$t("assets.lerverageFlowingWater.tab1List5"),width:"10%"},{key:"interest",title:this.$t("assets.lerverageFlowingWater.tab1List6"),width:"15%"},{key:"oweAmount",title:this.$t("assets.lerverageFlowingWater.tab1List7"),width:"15%"},{key:"operation",title:this.$t("assets.lerverageFlowingWater.tab1List8"),width:"10%"}]),2===this.nowType&&(t=[{key:"coin",title:this.$t("assets.lerverageFlowingWater.tab2List3"),width:"15%"},{key:"account",title:this.$t("assets.lerverageFlowingWater.tab2List2"),width:"10%"},{key:"time",title:this.$t("assets.lerverageFlowingWater.tab2List1"),width:"10%"},{key:"amount",title:this.$t("assets.lerverageFlowingWater.tab2List4"),width:"15%"},{key:"rate",title:this.$t("assets.lerverageFlowingWater.tab2List5"),width:"10%"},{key:"interest",title:this.$t("assets.lerverageFlowingWater.tab2List6"),width:"15%"},{key:"statusText",title:this.$t("assets.lerverageFlowingWater.tab2List7"),width:"15%"},{key:"operation",title:this.$t("assets.lerverageFlowingWater.tab1List8"),width:"10%"}]),3===this.nowType&&(t=[{key:"coin",title:this.$t("assets.lerverageFlowingWater.tab3List3"),width:"23%"},{key:"time",title:this.$t("assets.lerverageFlowingWater.tab3List1"),width:"23%"},{key:"account",title:this.$t("assets.lerverageFlowingWater.tab3List2"),width:"23%"},{key:"amount",title:this.$t("assets.lerverageFlowingWater.tab3List4"),width:"23%"},{key:"side",title:this.$t("assets.lerverageFlowingWater.tab3List5"),width:"8%"}]),t},axiosSymbol:function(){return"all"===this.symbol?null:this.symbol},newcoinOpen:function(){return this.$store.state.baseData.newcoinOpen},subColumns:function(){return[{key:"coin",title:this.$t("assets.leverageToLoan.list3")},{key:"time",title:this.$t("order.exchangeOrder.detailsTime")},{key:"volume",title:this.$t("order.exchangeOrder.detailsVolume")},{key:"type",title:this.$t("assets.flowingWater.type")}]}},watch:{market:function(t){t&&this.messData&&this.setData()},messData:function(t){t&&this.market&&this.setData()}},filters:{getCoinShowName:function(t,e){return t?Object(n["l"])(t,e):""}},methods:{init:function(){this.getMess(),this.market&&this.messData&&this.setData()},goBack:function(){this.$router.back()},getShowSymbol:function(t,e){if(!this.market)return t;var a=this.market.market,s=t;if(this.market&&a){var i=a[e][t];s=i.showName||i.name}return s},getShowCoin:function(t){if(!this.market)return t;var e=this.market.coinList,a=t;return this.market&&e&&(a=Object(n["l"])(t,e)),a},getMess:function(){var t=this;this.axios({url:"lever/finance/balance"}).then((function(e){if("0"===e.code.toString()){var a=[];Object.keys(e.data.leverMap).forEach((function(t){var s=t.split("/");a[s[0]+s[1]]=e.data.leverMap[t]})),t.messData=a}}))},symbolChange:function(t){this.symbol=t.code,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData()},otherTypeChange:function(t){this.otherType=t.code,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData()},currentType:function(t){this.nowType=t.index,this.paginationObj.currentPage=1,this.paginationObj.total=0,this.tabelList=[],this.tabelLoading=!0,this.getData()},rateFixFn:function(t){return"".concat(Object(n["f"])(100*t,2),"%")},setData:function(){var t=this,e=[{code:"all",value:this.$t("assets.lerverageFlowingWater.allCoin")}],a=this.market.market;Object.keys(a).forEach((function(s){Object.keys(a[s]).forEach((function(i){var n=a[s][i];n.is_open_lever&&e.push({code:n.symbol,value:t.getShowSymbol(n.name,s)})}))})),this.symbolList=e,this.symbol="all",this.getData()},getData:function(){1===this.nowType?this.rechargeData():2===this.nowType?this.withdrawData():this.otherData()},repaymentSuccess:function(){this.getData()},pagechange:function(t){this.paginationObj.currentPage=t,this.getData()},tableClick:function(t,e){if("repayment"===t){var a=e.split("_")[1],s=this.dataList[a];this.$bus.$emit("openRepayment",s)}else"detail"===t&&this.getSubTableData(e)},typeText:function(t){var e="";switch(t){case"1":e=this.$t("assets.leverageToLoan.typeText1");break;case"2":e=this.$t("assets.leverageToLoan.typeText2");break;default:e=this.$t("assets.leverageToLoan.typeText3")}return e},getSubTableData:function(t){var e=this;if(this.subContentId===t)this.subContentId=null;else{var a=t.split("_"),s=Number(a[1]);this.loading=!0,this.subContent=[],this.axios({url:"lever/return/info",method:"post",params:{id:s.toString(),pageSize:1e4}}).then((function(a){if(e.loading=!1,"0"===a.code.toString()){var s=[];a.data.financeList.forEach((function(t){var a=8;s.push({time:Object(n["k"])(Number(t.repaymentTime)),coin:e.getShowCoin(t.coin),volume:Object(n["f"])(t.returnMoney,a),type:e.typeText(t.type.toString())})})),e.subContentId=t,e.subContent=s}else e.$bus.$emit("tip",{text:a.msg,type:"error"})}))}},thousands:function(t){if(t&&parseFloat(t)){var e=t.toString(),a=e.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return e.replace(a,"$1,")}return t},rechargeData:function(){var t=this;this.axios({url:"lever/borrow/new",params:{pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,symbol:this.axiosSymbol}}).then((function(e){if(1===t.nowType&&"0"===e.code.toString()){var a=[];e.data.financeList.forEach((function(e){var s=t.market.coinList,i=s[e.coin]&&s[e.coin].showPrecision||0,r=t.messData[e.symbol]||{},o=r.baseReturnPrecision||8;e.coin===r.quoteCoin&&(o=r.quoteReturnPrecision||8),o=8,i=8,t.dataList[e.id]=e,a.push({id:"".concat(e.symbol,"_").concat(e.id),coin:e.coin.toUpperCase(),account:e.showName||e.symbol.toUpperCase(),time:Object(n["k"])(Number(e.ctime)),amount:t.thousands(Object(n["f"])(e.borrowMoney,i)),rate:t.rateFixFn(e.interestRate),interest:t.thousands(Object(n["f"])(e.oweInterest,o)),oweAmount:t.thousands(Object(n["f"])(e.oweAmount,o)),operation:[{type:"detail",text:t.$t("order.exchangeOrder.details")},{type:"repayment",text:t.$t("assets.lerverageFlowingWater.repayment")}]})})),t.tabelLoading=!1,t.tabelList=a,t.paginationObj.total=e.data.count}}))},getHisStatus:function(t){var e="";switch(t){case 1:e=this.$t("assets.lerverageFlowingWater.status1");break;case 2:e=this.$t("assets.lerverageFlowingWater.status2");break;case 3:e=this.$t("assets.lerverageFlowingWater.status3");break;case 4:e=this.$t("assets.lerverageFlowingWater.status4");break;case 5:e=this.$t("assets.lerverageFlowingWater.status5");break;case 6:e=this.$t("assets.lerverageFlowingWater.status6");break;case 7:e=this.$t("assets.lerverageFlowingWater.status7");break;default:e=""}return e},withdrawData:function(){var t=this;this.axios({url:"lever/borrow/history",params:{pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,symbol:this.axiosSymbol}}).then((function(e){if(2===t.nowType&&"0"===e.code.toString()){var a=[];e.data.financeList.forEach((function(e){var s=t.market.coinList,i=s[e.coin]&&s[e.coin].showPrecision||0,r=t.messData[e.symbol]||{},o=r.baseReturnPrecision;e.coin===r.quoteCoin&&(o=r.quoteReturnPrecision||8),o=8,i=8,a.push({id:"".concat(e.symbol,"_").concat(e.id),coin:e.coin.toUpperCase(),account:e.showName||e.symbol.toUpperCase(),time:Object(n["k"])(Number(e.ctime)),amount:t.thousands(Object(n["f"])(e.borrowMoney,i)),rate:t.rateFixFn(e.interestRate),interest:t.thousands(Object(n["f"])(e.interest,o)),statusText:t.getHisStatus(e.status),operation:[{type:"detail",text:t.$t("order.exchangeOrder.details")}]})})),t.tabelLoading=!1,t.tabelList=a,t.paginationObj.total=e.data.count}}))},otherData:function(){var t=this;this.axios({url:"lever/finance/transfer/list",params:{pageSize:this.paginationObj.display,page:this.paginationObj.currentPage,symbol:this.axiosSymbol,transactionType:"0"===this.otherType?void 0:this.otherType}}).then((function(e){if(3===t.nowType&&"0"===e.code.toString()){var a=e.data,s=a.financeList,i=a.count,r=[];s.forEach((function(e,a){var s=t.market.coinList,i=s[e.coinSymbol]&&s[e.coinSymbol].showPrecision||0;i=8;var o=1===e.transferType?t.$t("assets.lerverageFlowingWater.directionIn"):t.$t("assets.lerverageFlowingWater.directionOut");r.push({id:a,coin:e.coinSymbol,account:e.showName||e.symbol,time:Object(n["k"])(e.createTime),amount:t.thousands(Object(n["f"])(e.amount,i)),side:{text:o,class:1===e.transferType?"f-5-cl":"f-6-cl"}})})),t.tabelLoading=!1,t.tabelList=r,t.paginationObj.total=i}}))}}},o=(a("8b90"),a("1668")),l={mixins:[r],components:{leverageRepayment:o["a"]},mounted:function(){this.init()}},c=l,u=a("2877"),h=Object(u["a"])(c,s,i,!1,null,null,null);e["default"]=h.exports},"8b90":function(t,e,a){},ed09:function(t,e,a){}}]);