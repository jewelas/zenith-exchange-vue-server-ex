(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be5d352e"],{"0e2b":function(t,s,a){"use strict";a.r(s);var n=function(){var t=this,s=t._self._c;return s("section",{staticClass:"v5-page-otcAccount"},[s("div",{staticClass:"total-assets fuz-card-plain"},[s("h2",{staticClass:"title"},[s("span",{staticClass:"v5-5-cl"},[t._v(t._s(t.$t("assets.index.otcAccount")))]),s("span",{staticClass:"hide-assets v5-9-bg",on:{click:t.hideAssets}},[t.isHide?s("svg",{staticClass:"icon icon-12",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-assets_13"}})]):s("svg",{staticClass:"icon icon-12",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-assets_12"}})])])]),s("div",{staticClass:"folded-text"},[t._v("\n      "+t._s(t.$t("assets.exchangeAccount.TotalAssets"))+"\n    ")]),s("div",{staticClass:"folded-num"},[t.isHide?s("div",{staticClass:"num-hide v5-5-cl"},[s("span",[t._v("********")])]):s("div",{staticClass:"num-display"},[s("span",{staticClass:"v5-5-cl btcNum"},[t._v("\n          "+t._s(t._f("thousands")(t.totalBalance))+" "+t._s(t.getShowCoin(t.totalBalanceSymbol))+"\n        ")]),s("span",{staticClass:"v5-6-cl fiatNum"},[t._v("\n           ≈ "+t._s(t._f("thousands")(t.totalRate))+" "+t._s(t.userCurrency)+"\n        ")])])]),s("div",{staticClass:"funcButton-list"},[s("c-v5-button",{attrs:{type:"hollow",height:"32px",paddingW:"18px",defaultColorClass:t.colorList_1[0],hoverColorClass:t.colorList_1[1],activeColorClass:t.colorList_1[2]},on:{click:function(s){return t.operation("buy")}}},[t._v("\n        "+t._s(t.$t("assets.otcAccount.buy"))+"\n      ")]),s("c-v5-button",{attrs:{type:"hollow",height:"32px",paddingW:"18px",defaultColorClass:t.colorList_1[0],hoverColorClass:t.colorList_1[1],activeColorClass:t.colorList_1[2]},on:{click:function(s){return t.operation("sell")}}},[t._v("\n        "+t._s(t.$t("assets.otcAccount.sell"))+"\n      ")]),s("c-v5-button",{attrs:{type:"hollow",height:"32px",paddingW:"18px",defaultColorClass:t.colorList_1[0],hoverColorClass:t.colorList_1[1],activeColorClass:t.colorList_1[2]},on:{click:function(s){return t.operation("transfer")}}},[t._v("\n        "+t._s(t.$t("assets.leverageAccount.transfer"))+"\n      ")]),s("c-v5-button",{attrs:{type:"hollow",height:"32px",paddingW:"18px",defaultColorClass:t.colorList_1[0],hoverColorClass:t.colorList_1[1],activeColorClass:t.colorList_1[2]},on:{click:function(s){return t.operation("flowWater")}}},[t._v("\n        "+t._s(t.$t("assets.index.flowingWater"))+"\n      ")])],1)]),s("div",{staticClass:"otcAccount-list fuz-card-plain"},[s("div",{staticClass:"list-header fuz-card-title"},[s("div",{staticClass:"title v5-5-cl"},[t._v("\n        "+t._s(t.$t("assets.exchangeAccount.ListOfFunds"))+"\n      ")]),s("div",{staticClass:"hide"},[s("c-switch",{attrs:{value:t.switchFlag},on:{click:t.switchChange}}),s("span",{staticClass:"hidetext v5-6-cl"},[t._v(t._s(t.$t("assets.hideMinAssets")))])],1),s("div",{staticClass:"find"},[s("c-v5-inputFind",{attrs:{promptText:t.$t("assets.exchangeAccount.SearchCurrency"),value:t.findValue,clearable:!0,className:"findClass"},on:{onChanges:t.findChanges}})],1)]),s("div",{staticClass:"otcAccount-center"},[s("c-v5-table",{attrs:{loading:t.tabelLoading,imgMap:t.imgMap,colorMap:t.colorMap,columns:t.columns,dataList:t.dataListFilter},scopedSlots:t._u([{key:"coin",fn:function(a){return t.coinList&&t.coinList[a.row.coin]?s("dl",{staticClass:"table-coin"},[s("dt",[s("img",{attrs:{src:t.coinList[a.row.coin].icon,alt:""}})]),s("dd",[s("div",{staticClass:"coinShowName v5-5-cl"},[t._v(t._s(t._f("getCoinShowName")(a.row.coin,t.coinList)))]),s("div",{staticClass:"coinLongName v5-6-cl"},[t._v("\n              "+t._s(t.coinList[a.row.coin].longName||a.row.coin)+"\n            ")])])]):t._e()}},{key:"normal",fn:function(a){return[t.isHide?s("div",[t._v("********")]):s("ul",[s("li",[t._v(t._s(t._f("thousands")(a.row.normal)))]),a.row.showUnlockSell?s("li",[t._v(t._s(a.row.overcharge))]):t._e()])]}},{key:"freeze",fn:function(a){return[t.isHide?s("div",[t._v("********")]):s("div",[t._v("\n            "+t._s(a.row.freeze)+"\n           ")])]}},{key:"operation",fn:function(a){return s("div",{},[s("c-v5-button",{staticClass:"operation-button",attrs:{type:"text",paddingW:"0"},on:{click:function(s){return t.tableClick(a.row)}}},[t._v(t._s(a.row.operation))])],1)}}],null,!0)})],1)]),s("c-v5-dialog",{attrs:{showFlag:t.showTransfer,titleText:t.$t("assets.otcAccount.CapitalTransfer"),confirmText:t.$t("assets.leverageAccount.transfer"),confirmDisabled:t.transferDisabled,size:"large"},on:{close:t.closeTransfer,confirm:t.confirmTransfer}},[s("div",{staticClass:"transfer-form"},[s("div",{staticClass:"transfer-account",class:{reverse:2===t.transferSide}},[s("div",{staticClass:"exchange account-side"},[s("c-v5-input",{attrs:{width:"184px",name:"exchangeAccount",readonly:!0,value:t.$t("assets.index.exchangeAccount")}},[s("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n              "+t._s(1===t.transferSide?t.$t("assets.otcAccount.from"):t.$t("assets.otcAccount.to"))+"\n            ")])]),s("div",{staticClass:"available v5-6-cl"},[t._v("\n              "+t._s(t.$t("assets.otcAccount.Available"))+":\n              "+t._s(t._f("thousands")(t.exchangeAvailable))+" "+t._s(t.transferCoin)+"\n            ")])],1),s("div",{staticClass:"change-icon"},[s("svg",{staticClass:"icon icon-24",attrs:{"aria-hidden":"true"},on:{click:t.changeTransferSide}},[s("use",{attrs:{"xlink:href":"#icon-assets_9"}})])]),s("div",{staticClass:"other account-side"},[s("c-v5-input",{attrs:{width:"184px",readonly:!0,value:t.$t("assets.index.otcAccount")}},[s("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n              "+t._s(2===t.transferSide?t.$t("assets.otcAccount.from"):t.$t("assets.otcAccount.to"))+"\n            ")])]),s("div",{staticClass:"available v5-6-cl"},[t._v("\n              "+t._s(t.$t("assets.otcAccount.Available"))+":\n              "+t._s(t._f("thousands")(t.otherAvailable))+" "+t._s(t.transferCoin)+"\n            ")])],1)]),s("div",{staticClass:"transfer-coin"},[s("c-v5-select",{attrs:{width:"100%",name:"transferCoin",imgMap:t.imgMap,options:t.otcCoinList,filterable:!0,value:t.transferCoin},on:{onChanges:t.selectChange}},[s("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n            "+t._s(t.$t("assets.otcAccount.coin"))+"\n          ")])])],1),s("div",{staticClass:"transfer-num"},[s("c-v5-input",{attrs:{width:"100%",name:"transferNum",placeholder:t.$t("trade.pleaseInput")+t.$t("assets.otcAccount.volume"),value:t.transferNum,clearable:!0,errorFlag:t.transferError,errorText:t.$t("assets.otcAccount.volumeError"),warningText:t.transferWarningText},on:{onChanges:t.inputChange}},[s("div",{staticClass:"v5-6-cl",attrs:{slot:"promptExtend"},slot:"promptExtend"},[t._v("\n            "+t._s(t.$t("assets.otcAccount.volume"))+"\n          ")]),s("span",{staticClass:"transfer-all v5-1-cl",attrs:{slot:"append"},on:{click:t.transferAll},slot:"append"},[t._v(t._s(t.$t("assets.otcAccount.all")))])])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.transferLoading,expression:"transferLoading"}],staticClass:"assets-loading"},[s("c-loading",{attrs:{size:"50"}})],1)],1)},e=[],i=(a("a481"),a("6b54"),a("7514"),a("ac6a"),a("95d5")),o={name:"page-otcAccount",data:function(){return{isHide:i["u"].get("assets_hide")||!1,imgMap:i["s"],colorMap:i["b"],tabelLoading:!0,dataList:[],totalBalance:"--",totalBalanceSymbol:"",totalRate:"--",switchFlag:!1,findValue:"",colors:["rgba(255, 255, 255, 1)","rgba(255, 255, 255, 0.8)","rgba(255, 255, 255, 0.6)","rgba(255, 255, 255, 0.4)","rgba(255, 255, 255, 0.25)","rgba(255, 255, 255, 0.1)"],transferLoading:!1,showTransfer:!1,transferSide:1,otcCoinList:[],transferCoin:"",transferNum:"",otcMap:{},lan:Object(i["n"])("lan")}},computed:{colorList_1:function(){return["v5-1-bd v5-1-cl","v5-1-bg v5-1-bd u-16-cl","v5-1-bg v5-1-bd u-16-cl"]},transferWarningText:function(){var t=this.$t("assets.otcAccount.can"),s=1===this.transferSide?this.exchangeAvailable:this.otherAvailable;return t+s+this.getShowCoin(this.transferCoin)},transferError:function(){var t=!1;return 1===this.transferSide?parseFloat(this.transferNum)>parseFloat(this.exchangeAvailable)&&(t=!0):2===this.transferSide&&parseFloat(this.transferNum)>parseFloat(this.otherAvailable)&&(t=!0),t},columns:function(){return[{key:"coin",title:this.$t("assets.otcAccount.coin"),width:"28%"},{key:"normal",title:this.$t("assets.otcAccount.Available"),width:"28%",sortable:!0},{key:"freeze",title:this.$t("assets.otcAccount.freeze"),width:"28%"},{key:"operation",title:this.$t("assets.otcAccount.options"),width:"16%"}]},market:function(){return this.$store.state.baseData.market},coinList:function(){return this.market&&this.market.coinList},dataListFilter:function(){var t=this,s=[];this.switchFlag?this.dataList.forEach((function(t){parseFloat(t.btcValuation)>=1e-4&&s.push(t)})):s=this.dataList;var a=[];return s.forEach((function(s){-1!==s.coinShowName.toUpperCase().indexOf(t.findValue.toUpperCase())&&a.push(s)})),a},userCurrency:function(){return Object(i["n"])("user_Currency")||"USD"},transferDisabled:function(){return!this.transferNum||!this.transferCoin||this.transferError},linkurl:function(){return this.$store.state.baseData.publicInfo?this.$store.state.baseData.publicInfo.url:{}},transferBalance:function(){var t=this;if(this.transferCoin){var s=this.market.coinList[this.transferCoin].showPrecision,a=this.otcMap.find((function(s){return s.coinSymbol===t.transferCoin})),n=this.otcMap.find((function(s){return s.coinSymbol===t.transferCoin}));return{exchangeAvailable:Object(i["f"])(a.exchangeNormal,s),otherAvailable:Object(i["f"])(n.normal,s)}}return{exchangeAvailable:"--",otherAvailable:"--"}},exchangeAvailable:function(){return this.transferBalance.exchangeAvailable},otherAvailable:function(){return this.transferBalance.otherAvailable}},watch:{market:function(t){t&&this.sendOtcAxios()},transferNum:function(t){if(t){var s=this.market.coinList,a=s[this.transferCoin]&&s[this.transferCoin].showPrecision||0;this.transferNum=Object(i["h"])(t,a)}}},filters:{thousands:function(t){if(t){var s=t.toString(),a=s.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return s.replace(a,"$1,")}return t},getCoinShowName:function(t,s){return Object(i["l"])(t,s)}},methods:{hideAssets:function(){this.isHide=!this.isHide,i["u"].set("assets_hide",this.isHide)},getShowCoin:function(t){var s=t;return this.market&&this.market.coinList&&(s=Object(i["l"])(t,this.market.coinList)),s},init:function(){i["u"].get("assetsSwitch")&&(this.switchFlag=i["u"].get("assetsSwitch")),this.market&&this.sendOtcAxios()},operation:function(t){"transfer"===t?(this.showTransfer=!0,this.transferCoin||(this.transferCoin=this.otcCoinList[0].code)):"buy"===t||"sell"===t?window.location.href="".concat(this.linkurl.otcUrl,"/").concat(this.lan):"flowWater"===t&&this.$router.push("/newAssets/otcFlowingWater")},changeTransferSide:function(){this.transferNum="",1===this.transferSide?this.transferSide=2:this.transferSide=1},closeTransfer:function(){this.showTransfer=!1,this.transferNum="",this.transferSide=1},transferAll:function(){1===this.transferSide?this.transferNum=this.exchangeAvailable:this.transferNum=this.otherAvailable},inputLineChange:function(t,s){this[s]=t},confirmTransfer:function(){var t=this;this.transferLoading=!0,this.axios({url:"finance/otc_transfer",params:{fromAccount:1===this.transferSide?"1":"2",toAccount:1===this.transferSide?"2":"1",amount:this.transferNum,coinSymbol:this.transferCoin},method:"post"}).then((function(s){t.transferLoading=!1,"0"===s.code.toString()?(t.$bus.$emit("tip",{text:s.msg,type:"success"}),t.transferNum="",t.transferSide=1,t.showTransfer=!1,t.sendOtcAxios()):t.$bus.$emit("tip",{text:s.msg,type:"error"})}))},sendOtcAxios:function(){var t=this;this.axios({url:"finance/v4/otc_account_list"}).then((function(s){t.tabelLoading=!1,"0"===s.code.toString()?t.setData(s.data):t.$bus.$emit("tip",{text:s.msg,type:"error"})}))},thousands:function(t){if(t){var s=t.toString(),a=s.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return s.replace(a,"$1,")}return t},setData:function(t){var s=this,a=t.totalBalance,n=t.totalBalanceSymbol,e=t.allCoinMap,o=this.market,r=o.coinList,c=o.rate,l=r[n]&&r[n].showPrecision||0;this.totalBalance=Object(i["f"])(a,l),this.totalBalanceSymbol=n,this.totalRate=Object(i["i"])(a,c,n,this.userCurrency);var u=r[n]&&r[n].showPrecision||0,h=[],f=[];e.forEach((function(t){var a=r[t.coinSymbol]&&r[t.coinSymbol].showPrecision||0;h.push({id:JSON.stringify(t),btcValuation:Object(i["f"])(t.btcValuation,u),coin:t.coinSymbol,coinShowName:Object(i["l"])(t.coinSymbol,r),normal:Object(i["f"])(t.normal,a),freeze:s.thousands(Object(i["f"])(t.lock,a)),operation:s.$t("assets.otcAccount.optionCapitalTransfer")}),f.push({img:r[t.coinSymbol].icon,code:t.coinSymbol,value:Object(i["l"])(t.coinSymbol,r)})})),this.otcMap=e,this.dataList=h,this.otcCoinList=f},selectChange:function(t,s){this[s]=t.code},inputChange:function(t,s){this[s]=t},findChanges:function(t){this.findValue=t},switchChange:function(){this.switchFlag=!this.switchFlag,i["u"].set("assetsSwitch",this.switchFlag)},tableClick:function(t){this.transferCoin=t.coin,this.showTransfer=!0}}},r=(a("267e"),{mixins:[o],mounted:function(){this.init()}}),c=r,l=a("2877"),u=Object(l["a"])(c,n,e,!1,null,null,null);s["default"]=u.exports},"267e":function(t,s,a){}}]);