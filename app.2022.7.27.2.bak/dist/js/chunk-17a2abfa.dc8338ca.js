(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17a2abfa"],{"6dd1":function(e,t,s){},fd45:function(e,t,s){"use strict";s.r(t);s("6b54");var i=function(){var e=this,t=e._self._c;return t("section",{staticClass:"page-resetPass"},[t("div",{staticClass:"go-home-btn a-3-bd",on:{click:function(t){return e.goUrl("/login")}}},[t("svg",{staticClass:"icon icon-18",attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#icon-e_11"}})]),e._v("\n    Sign In\n  ")]),t("c-intoGuide",{attrs:{imgMap:e.imgMap}},[t("div",{staticClass:"guide-center"},[t("p",{class:e.isInternationTem?"b-1-cl":"b-8-cl"},[e._v("\n        "+e._s(e.$t("resetPass.ResetLoginPassword"))+"\n      ")]),t("div",{staticClass:"guide-text b-2-cl"},[e._v("\n        "+e._s(e.safetyTimeSet.is_open&&"1"===e.safetyTimeSet.is_open.toString()?e.$t("personal.prompt.text5",{number:e.safetyTimeSet.hour}):e.$t("personal.prompt.ResetLoginPasswordError"))+"\n      ")])])]),t("div",{staticClass:"page-resetPass-content"},[t("div",{staticClass:"content-center"},[e.tabFlag&&"3"!==e.nowStep?t("c-intoTab",{attrs:{list:e.tabList,nowKey:e.nowType,disabled:e.submitLoading,className:"resetPassTab"},on:{onchenges:e.setNowType}}):e._e(),"3"!==e.nowStep?t("c-inputLine",{key:e.domKeys.userKey,attrs:{name:"userValue",maxLength:e.maxLength,disabled:"2"===e.nowStep,value:e.userValue,promptText:e.domTexts.userText,errorHave:!0,errorText:e.domTexts.userError,errorFlag:e.userErrorFlag},on:{onchanges:e.inputChanges}}):e._e(),"1"!==e.nowStep||e.verificationType?e._e():t("c-verify",{key:e.domKeys.verifyKey,attrs:{name:"phone",colorMap:e.colorMap,marginTop:"6px",errorHave:!0},on:{callback:e.verifyCallBack}}),"2"===e.nowStep?t("c-inputLine",{key:e.domKeys.checkKey,attrs:{maxLength:"6",name:"checkValue",value:e.checkValue,promptText:e.domTexts.codeText,errorHave:!0,errorText:e.domTexts.codeError,errorFlag:e.checkErrorFlag},on:{onchanges:e.inputChanges}},["phone"===e.nowType?t("c-getCode",{attrs:{voiceOpen:e.voiceSmsOpen,name:"resetPassGetcode"},on:{click:e.getCodeClick}}):t("c-getCode",{attrs:{name:"resetPassGetcode"},on:{click:e.getCodeClick}})],1):e._e(),"2"===e.nowStep&&e.haveGoogle?t("c-inputLine",{key:e.domKeys.googleKey,attrs:{maxLength:"6",name:"googleValue",value:e.googleValue,promptText:e.$t("resetPass.googleCode"),errorHave:!0,errorText:e.$t("resetPass.googleError"),errorFlag:e.googleErrorFlag},on:{onchanges:e.inputChanges}}):e._e(),"2"===e.nowStep&&e.haveID?t("c-inputLine",{key:e.domKeys.IDKey,attrs:{maxLength:"100",name:"IDValue",value:e.IDValue,promptText:e.$t("resetPass.IDCode"),errorHave:!0,errorText:e.$t("resetPass.IDError"),errorFlag:e.IDErrorFlag},on:{onchanges:e.inputChanges}}):e._e(),"3"===e.nowStep?t("c-inputLine",{key:e.domKeys.passKey,attrs:{maxLength:"20",name:"passValue",inputType:"password",value:e.passValue,promptText:e.$t("resetPass.password"),errorHave:!0,errorText:e.$t("resetPass.passwordError"),errorFlag:e.passErrorFlag},on:{onchanges:e.inputChanges}}):e._e(),"3"===e.nowStep?t("c-inputLine",{key:e.domKeys.comfirmKey,attrs:{maxLength:"20",name:"comfirmValue",inputType:"password",value:e.comfirmValue,promptText:e.$t("resetPass.confrimPassWord"),errorHave:!0,errorText:e.$t("resetPass.confrimPassWordError"),errorFlag:e.comfirmErrorFlag},on:{onchanges:e.inputChanges}}):e._e(),t("c-button",{attrs:{marginTop:"46px",height:"40px",width:"100%",disabled:e.submitStatus.disabled,loading:e.submitLoading,paddingW:"0px"},on:{click:e.submit}},[e._v(e._s(e.submitStatus.text))])],1),t("div",{staticClass:"copy z-2-cl",staticStyle:{"border-color":"#293448 !important"}},[e._v("\n      Copyright Â© 2021 "+e._s(e.companyName)+". All rights reserve\n    ")])])],1)},o=[],r=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("95d5");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"page-resetPass",data:function(){return{imgMap:n["s"],colorMap:n["b"],nowType:"phone",nowStep:"1",userValue:"",checkValue:"",passValue:"",comfirmValue:"",submitLoading:!1,submitDisabled:!1,verifyObj:{},verifyFlag:!1,haveGoogle:!1,haveID:!1,googleValue:"",IDValue:"",smsType:"sms"}},watch:{loginRegistType:function(e){e&&this.initNowType()},loginFlag:function(e){e&&this.goHome()}},computed:{verificationType:function(){return!this.publicInfo||!this.publicInfo.switch||"0"===this.publicInfo.switch.verificationType},isInternationTem:function(){return"2"===this.$store.state.baseData.templateLayoutType},tabFlag:function(){var e=!1;return"1"===this.loginRegistType&&(e=!0),e},loginRegistType:function(){var e="1";return e},tabList:function(){return[{name:this.$t("resetPass.phoneReset"),key:"phone"},{name:this.$t("resetPass.emailReset"),key:"email"}]},loginFlag:function(){var e=this.$store.state.baseData,t=e.isLogin,s=e.userInfoIsReady;return!(!t||!s)},maxLength:function(){var e="100";return"phone"===this.nowType&&(e="30"),e},regExps:function(){return this.$store.state.regExp},userFlag:function(){var e="phone"===this.nowType?this.regExps.phone:this.regExps.email;return e.test(this.userValue)},checkFlag:function(){return this.regExps.verification.test(this.checkValue)},googleFlag:function(){return this.regExps.verification.test(this.googleValue)},IDFlag:function(){return this.regExps.nonEmpty.test(this.IDValue)},passFlag:function(){return this.regExps.passWord.test(this.passValue)},comfirmFlag:function(){return this.passValue===this.comfirmValue},userErrorFlag:function(){return 0!==this.userValue.length&&!this.userFlag},checkErrorFlag:function(){return 0!==this.checkValue.length&&!this.checkFlag},googleErrorFlag:function(){return 0!==this.googleValue.length&&!this.googleFlag},IDErrorFlag:function(){return 0!==this.IDValue.length&&!this.IDFlag},passErrorFlag:function(){return 0!==this.passValue.length&&!this.passFlag},comfirmErrorFlag:function(){return 0!==this.comfirmValue.length&&!this.comfirmFlag},domKeys:function(){return"phone"===this.nowType?{userKey:"phone-user",verifyKey:"phone-verify",checkKey:"phone-check",passKey:"phone-pass",comfirmKey:"phone-comfirm",googleKey:"phone-google",IDKey:"phone-ID"}:{userKey:"email-user",verifyKey:"email-verify",checkKey:"email-check",passKey:"email-pass",comfirmKey:"email-comfirm",googleKey:"email-google",IDKey:"email-ID"}},domTexts:function(){return"phone"===this.nowType?{userText:this.$t("resetPass.phone"),userError:this.$t("resetPass.phoneError"),codeText:this.$t("resetPass.phoneCode"),codeError:this.$t("resetPass.phoneCodeError")}:{userText:this.$t("resetPass.email"),userError:this.$t("resetPass.emailError"),codeText:this.$t("resetPass.emailCode"),codeError:this.$t("resetPass.emailCodeError")}},submitStatus:function(){var e=!0,t="";if("1"===this.nowStep)(this.verifyFlag&&this.userFlag&&!this.verificationType||this.submitLoading||this.userFlag&&this.verificationType)&&(e=!1),t=this.$t("resetPass.next");else if("2"===this.nowStep){var s=!0,i=!0;this.haveID&&(s=this.IDFlag),this.haveGoogle&&(i=this.googleFlag),(this.checkFlag&&i&&s||this.submitLoading)&&(e=!1),t=this.$t("resetPass.next")}else"3"===this.nowStep&&((this.passFlag&&this.comfirmFlag||this.submitLoading)&&(e=!1),t=this.$t("resetPass.submit"));return{text:t,disabled:e}},publicInfo:function(){var e=this.$store.state.baseData.publicInfo;return e},companyName:function(){return this.publicInfo&&this.publicInfo.msg?this.publicInfo.msg.company_name:""},voiceSmsOpen:function(){return this.$store.state.baseData.voiceSmsOpen},safetyTimeSet:function(){var e=this.$store.state.baseData.publicInfo,t="{}";return e&&e.switch&&e.switch.update_safe_withdraw&&(t=e.switch.update_safe_withdraw),JSON.parse(t)}},methods:{init:function(){var e=this;this.loginFlag&&this.goHome(),this.$bus.$off("emailCode"),this.$bus.$on("emailCode",(function(t){var s=JSON.parse(JSON.stringify(t));s.callback=void 0,e.axios({url:"v4/common/emailValidCode",method:"post",header:{},params:s}).then((function(e){t.callback(e)})).catch((function(){}))})),this.$bus.$off("phoneCode"),this.$bus.$on("phoneCode",(function(t){var s=JSON.parse(JSON.stringify(t));s.callback=void 0,e.axios({url:"v4/common/smsValidCode",method:"post",header:{},params:s}).then((function(e){t.callback(e)})).catch((function(){}))})),this.loginRegistType&&this.initNowType()},goUrl:function(e){this.$router.push(e)},initNowType:function(){"3"===this.loginRegistType?this.nowType="email":this.nowType="phone"},goHome:function(){this.$router.push("/")},setNowType:function(e){this.nowStep="1",this.nowType=e,this.userValue="",this.verifyFlag=!1,this.verifyObj={},this.checkValue=""},inputChanges:function(e,t){this[t]=e},verifyCallBack:function(e){this.verifyObj=e,this.verifyFlag=!0},getCodeClick:function(e,t){this.sendCode(e,t)},submit:function(){"1"===this.nowStep?this.submitStep1():"2"===this.nowStep?this.submitStep2():"3"===this.nowStep&&this.submitStep3()},submitStep1:function(){var e=this,t="phone"===this.nowType?"mobileNumber":"email";this.submitLoading=!0,this.axios({url:"v4/user/reset_password_step_one",params:c(c({},this.verifyObj),{},Object(r["a"])({geetest_challenge:this.verificationType?"sys_conf_validate":this.verifyObj.geetest_challenge,geetest_seccode:this.verificationType?"sys_conf_validate":this.verifyObj.geetest_seccode,geetest_validate:this.verificationType?"sys_conf_validate":this.verifyObj.geetest_validate,token:!!this.verificationType||(this.verifyObj.geetest_challenge||this.verifyObj.token),verificationType:this.publicInfo.switch.verificationType,nc:void 0},t,this.userValue))}).then((function(t){if(e.verifyObj.nc&&e.verifyObj.nc.reset(),e.verifyFlag=!1,e.verifyObj={},e.submitLoading=!1,"0"===t.code.toString()){var s=t.data,i=s.token,o=s.isCertificateNumber,r=s.isGoogleAuth;e.token=i,o&&"1"===o.toString()&&(e.haveID=!0),r&&"1"===r.toString()?e.haveGoogle=!0:e.haveGoogle=!1,e.nowStep="2"}else e.$bus.$emit("tip",{text:t.msg,type:"error"})}))},submitStep2:function(){var e,t=this,s="";s="phone"===this.nowType?"voiceSms"===this.smsType?"voiceSmsCode":"smsCode":"emailCode",this.submitLoading=!0,this.axios({url:"v4/user/reset_password_step_two",params:(e={},Object(r["a"])(e,s,this.checkValue),Object(r["a"])(e,"token",this.token),Object(r["a"])(e,"googleCode",this.googleValue),Object(r["a"])(e,"certifcateNumber",this.IDValue),e)}).then((function(e){t.submitLoading=!1,"0"===e.code.toString()?t.nowStep="3":t.$bus.$emit("tip",{text:e.msg,type:"error"})}))},submitStep3:function(){var e=this;this.submitLoading=!0,this.axios({url:"/user/reset_password_step_three",params:{loginPword:this.passValue,token:this.token}}).then((function(t){e.submitLoading=!1,"0"===t.code.toString()?(e.$bus.$emit("tip",{text:e.$t("resetPass.resetSuccess"),type:"success"}),e.$router.push("/login")):e.$bus.$emit("tip",{text:t.msg,type:"error"})}))},sendCode:function(e,t){var s=this;"phone"===this.nowType?this.$bus.$emit("phoneCode",{token:this.token,operationType:"24",smsType:t&&"voiceSms"===t?"1":"0",callback:function(e){if("0"!==e.code.toString())s.$bus.$emit("getCode-clear","resetPassGetcode"),s.$bus.$emit("tip",{text:e.msg,type:"error"});else{var i=t&&"voiceSms"===t?s.$t("login.voiceSendSuccess"):s.$t("login.phoneSendSuccess");s.$bus.$emit("tip",{text:i,type:"success"}),s.smsType=t&&"voiceSms"===t?"voiceSms":"sms"}}}):"email"===this.nowType&&this.$bus.$emit("emailCode",{token:this.token,operationType:"3",callback:function(e){"0"!==e.code.toString()?(s.$bus.$emit("getCode-clear","resetPassGetcode"),s.$bus.$emit("tip",{text:e.msg,type:"error"})):s.$bus.$emit("tip",{text:s.$t("resetPass.emailSendSuccess"),type:"success"})}})}}},h=(s("6dd1"),{mixins:[u],mounted:function(){this.init()}}),l=h,p=s("2877"),g=Object(p["a"])(l,i,o,!1,null,null,null);t["default"]=g.exports}}]);