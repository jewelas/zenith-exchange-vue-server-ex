(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20f782fa"],{"503a":function(e,t,n){},ccb8:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sumsub-wrap"},[t("div",{staticClass:"sumsub-container",attrs:{id:"sumsub-websdk-container"}}),t("c-loading",{directives:[{name:"show",rawName:"v-show",value:e.showLoading,expression:"showLoading"}],attrs:{size:"50"}})],1)},i=[],o=(n("28a5"),n("6b54"),n("95d5")),a={name:"sumsub",data:function(){return{lan:Object(o["n"])("lan")||"en_US",showLoading:!1}},methods:{init:function(){var e=this;this.showLoading=!0,window.loadSumsubJs?this.$route.query.tab>0?this.changeLevel():this.getAccessToken(this.initSumsub):this.loadScript("https://static.sumsub.com/idensic/static/sns-websdk-builder.js",(function(){window.loadSumsubJs=!0,e.$route.query.tab>0?e.changeLevel():e.getAccessToken(e.initSumsub)}))},loadScript:function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(){n.onload=null,n.onerror=null,t&&t()};var s=document.getElementsByTagName("head")[0];return(s||document.body).appendChild(n),!1},getAccessToken:function(e){var t=this;this.axios({url:"sumsub/get_access_token",params:{levelName:this.$route.query.levelName,type:"1"}}).then((function(n){var s=n.code,i=n.data,o=n.msg;t.showLoading=!1,"0"===s.toString()?e(i.accessToken):t.$bus.$emit("tip",{text:o,type:"error"})}))},changeLevel:function(){var e=this;this.axios({url:"sumsub/change_level_and_create_info",params:{levelName:this.$route.query.levelName,type:"1"}}).then((function(t){var n=t.code,s=t.msg;e.showLoading=!1,"0"===n.toString()?e.getAccessToken(e.initSumsub):e.$bus.$emit("tip",{text:s,type:"error"})}))},initSumsub:function(e){var t=this,n=window.snsWebSdk.init(e,(function(){return t.getNewAccessToken()})).withConf({lang:this.lan.split("_")[0],i18n:{document:{subTitles:{IDENTITY:"Upload a document that proves your identity"}}}}).withOptions({addViewportTag:!1,adaptIframeHeight:!0}).on("stepCompleted",(function(e){})).onMessage((function(e,n){n&&n.reviewStatus&&t.$store.dispatch("getUserInfo")})).build();n.launch("#sumsub-websdk-container")},getNewAccessToken:function(){var e=this;return new Promise((function(t){e.getAccessToken(t)}))}}},u=(n("503a"),{mixins:[a],mounted:function(){this.init()}}),c=u,r=n("2877"),d=Object(r["a"])(c,s,i,!1,null,null,null);t["default"]=d.exports}}]);