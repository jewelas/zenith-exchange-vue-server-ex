var setTradeData=function setTradeData(symbol,datalist,rateData,lan){var tradeData=[];var queueData=[];if(datalist&&datalist.length){var priceFix=symbol.price||symbol.pricePrecision;var volumeFix=symbol.volume||0;var marketName=symbol.name.split("/")[1];var keyArr=[];var num=0;datalist.forEach(function(item,index){if(num<150){var rate=fixRate(item.price,rateData,marketName,lan);var nextprice=datalist[index+1]?datalist[index+1].price:null;var rose=null;if(nextprice){if(nextprice>item.price){rose="down"}else if(nextprice<item.price){rose="up"}}tradeData.push({side:item.side==="SELL"?"u-4-cl":"u-1-cl",time:formatTime(item.ts).split(" ")[1],rate:rate,ts:item.ts,price:fixD(item.price,priceFix),vol:fixD(item.vol,volumeFix),rose:rose,date:new Date().getTime()+index,change:item.change});keyArr.push(item.ts);queueData.push(item);num+=1}});return{tradeData:tradeData.sort(function(a,b){return b.ts-a.ts}),queueDataList:queueData}}return{tradeData:tradeData,queueDataList:queueData}};