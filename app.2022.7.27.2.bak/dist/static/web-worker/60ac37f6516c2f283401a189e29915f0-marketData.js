var oldData={};function dataTemplate(item,WSdata,rateData,oldObj,lan){var names=item.name.split("/");var symbol=names[0];var unit=names[1];var showNames=item.showName?item.showName.split("/"):null;var showSymbol=showNames?showNames[0]:null;var showUnit=showNames?showNames[1]:null;if(!WSdata.renew.length||WSdata.renew.indexOf(item.symbol.toLowerCase())!==-1||!oldData[item.name]){var data=WSdata[item.symbol.toLowerCase()];var _oldObj=oldData[item.name];var symbolItem={};if(data){var marketName=item.name.split("/")[1]||item.quoteSymbol;var priceFix=item.price||item.pricePrecision;var volumeFix=item.volume||0;var oldClose=_oldObj?_oldObj.closes:"";var close=fixD(data.close,priceFix);var cN=parseFloat(close);var ocN=parseFloat(oldClose);var rate=0;if(rateData){rate=fixRate(data.close,rateData,marketName,lan)}var priceClass="";if(ocN){if(ocN>cN){priceClass="u-4-cl"}if(ocN<cN){priceClass="u-1-cl"}}var num=Math.abs(data.rose*10000/100);var rose=null;var rc=null;if(!parseFloat(num)){rose="0.00%"}else{rose="".concat(Number(num.toString().match(/^\d+(?:\.\d{0,2})?/)));if(data.rose<0){rc="u-4-cl";rose="-".concat(rose,"%")}if(data.rose>0){rc="u-1-cl";rose="+".concat(rose,"%")}if(data.rose===0){rc="";rose="0.00%"}}if(showNames){symbolItem.showSymbol={symbol:showSymbol,unit:showUnit}}symbolItem.symbol={symbol:symbol,unit:unit};symbolItem.closes=close;symbolItem.close={class:priceClass,data:close,price:rate};symbolItem.roses=rose;symbolItem.rose={class:rc,data:rose};symbolItem.IsST=item.IsST||0;symbolItem.newcoinFlag=item.newcoinFlag;symbolItem.sort=item.sort;symbolItem.name=item.name;symbolItem.multiple=item.multiple||"0";symbolItem.low=fixD(data.low,priceFix);symbolItem.vol=fixD(data.vol,volumeFix);symbolItem.high=fixD(data.high,priceFix);symbolItem.amount=fixD(data.amount,priceFix);symbolItem.holdAmount=fixD(data.holdAmount,priceFix);symbolItem.holdVolume=fixD(data.holdVolume,volumeFix);oldData[item.name]=symbolItem}else{if(showNames){symbolItem.showSymbol={symbol:showSymbol,unit:showUnit}}symbolItem.symbol={symbol:symbol,unit:unit};symbolItem.closes=-99999;symbolItem.close={class:"",data:"--",price:"--"};symbolItem.roses=-99999;symbolItem.rose={class:"",data:"--"};symbolItem.isShow=true;symbolItem.amount="--";symbolItem.low="--";symbolItem.high="--";symbolItem.vol="--";symbolItem.multiple=item.multiple||"0";symbolItem.name=item.name;symbolItem.sort=item.sort;symbolItem.IsST=item.IsST||0;symbolItem.newcoinFlag=item.newcoinFlag;oldData[item.name]=symbolItem}return symbolItem}return oldData[item.name]}var setMarketData=function setMarketData(symbolList,data,rateData,lan){var marketData={};var symbolsKeys=Object.keys(symbolList);symbolsKeys.forEach(function(item){if(symbolList[item].symbol){var symbolkey=symbolList[item].symbol;var itemData=data[symbolkey]||"";marketData[item]=dataTemplate(symbolList[item],data,rateData,oldData[symbolkey],lan)}});return marketData};